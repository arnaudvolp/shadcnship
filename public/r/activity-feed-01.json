{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "activity-feed-01",
  "title": "Activity Feed 01",
  "description": "An activity timeline with filtering, loading states, and real-time support",
  "dependencies": [
    "lucide-react",
    "date-fns"
  ],
  "registryDependencies": [
    "button",
    "avatar",
    "badge",
    "skeleton",
    "select"
  ],
  "files": [
    {
      "path": "src/registry/blocks/activity-feed-01/activity-feed.tsx",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { ActivityList, ActivityFilters, ActivitySkeleton } from \"./components\";\nimport { Loader2 } from \"lucide-react\";\nimport type { Activity, ActivityType, ActivityFeedProps } from \"./types/activity\";\n\n// =============================================================================\n// Demo Activities Data\n// =============================================================================\n\nconst demoActivities: Activity[] = [\n  {\n    id: \"1\",\n    type: \"created\",\n    user: {\n      id: \"u1\",\n      name: \"Sarah Connor\",\n      avatar: \"https://avatar.vercel.sh/sarah\",\n    },\n    target: {\n      id: \"p1\",\n      type: \"project\",\n      name: \"Website Redesign\",\n      href: \"#\",\n    },\n    createdAt: new Date().toISOString(),\n  },\n  {\n    id: \"2\",\n    type: \"commented\",\n    user: {\n      id: \"u2\",\n      name: \"John Doe\",\n      avatar: \"https://avatar.vercel.sh/john\",\n    },\n    target: {\n      id: \"t1\",\n      type: \"task\",\n      name: \"Update landing page\",\n      href: \"#\",\n    },\n    message: \"Looking good! Just a few minor tweaks needed on the hero section.\",\n    createdAt: new Date(Date.now() - 30 * 60 * 1000).toISOString(),\n  },\n  {\n    id: \"3\",\n    type: \"completed\",\n    user: {\n      id: \"u3\",\n      name: \"Emily Chen\",\n      avatar: \"https://avatar.vercel.sh/emily\",\n    },\n    target: {\n      id: \"t2\",\n      type: \"task\",\n      name: \"Design system documentation\",\n      href: \"#\",\n    },\n    createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n  },\n  {\n    id: \"4\",\n    type: \"mentioned\",\n    user: {\n      id: \"u2\",\n      name: \"John Doe\",\n      avatar: \"https://avatar.vercel.sh/john\",\n    },\n    target: {\n      id: \"c1\",\n      type: \"comment\",\n      name: \"API integration review\",\n      href: \"#\",\n    },\n    createdAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),\n  },\n  {\n    id: \"5\",\n    type: \"uploaded\",\n    user: {\n      id: \"u1\",\n      name: \"Sarah Connor\",\n      avatar: \"https://avatar.vercel.sh/sarah\",\n    },\n    target: {\n      id: \"f1\",\n      type: \"file\",\n      name: \"design-mockups.fig\",\n      href: \"#\",\n    },\n    createdAt: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n  },\n  {\n    id: \"6\",\n    type: \"assigned\",\n    user: {\n      id: \"u4\",\n      name: \"Mike Johnson\",\n      avatar: \"https://avatar.vercel.sh/mike\",\n    },\n    target: {\n      id: \"t3\",\n      type: \"task\",\n      name: \"Backend API optimization\",\n      href: \"#\",\n    },\n    createdAt: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n  },\n  {\n    id: \"7\",\n    type: \"joined\",\n    user: {\n      id: \"u5\",\n      name: \"Alice Brown\",\n      avatar: \"https://avatar.vercel.sh/alice\",\n    },\n    target: {\n      id: \"team1\",\n      type: \"team\",\n      name: \"Engineering\",\n    },\n    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),\n  },\n  {\n    id: \"8\",\n    type: \"updated\",\n    user: {\n      id: \"u3\",\n      name: \"Emily Chen\",\n      avatar: \"https://avatar.vercel.sh/emily\",\n    },\n    target: {\n      id: \"d1\",\n      type: \"document\",\n      name: \"Q4 Roadmap\",\n      href: \"#\",\n    },\n    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),\n  },\n  {\n    id: \"9\",\n    type: \"shared\",\n    user: {\n      id: \"u2\",\n      name: \"John Doe\",\n      avatar: \"https://avatar.vercel.sh/john\",\n    },\n    target: {\n      id: \"f2\",\n      type: \"file\",\n      name: \"quarterly-report.pdf\",\n      href: \"#\",\n    },\n    createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),\n  },\n  {\n    id: \"10\",\n    type: \"liked\",\n    user: {\n      id: \"u4\",\n      name: \"Mike Johnson\",\n      avatar: \"https://avatar.vercel.sh/mike\",\n    },\n    target: {\n      id: \"post1\",\n      type: \"post\",\n      name: \"Team milestone announcement\",\n      href: \"#\",\n    },\n    createdAt: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),\n  },\n];\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport default function ActivityFeed01({\n  activities: propActivities,\n  isLoading = false,\n  hasMore = true,\n  onLoadMore,\n  onFilter,\n  filterTypes: propFilterTypes,\n  showFilters = true,\n  className,\n}: ActivityFeedProps) {\n  const [internalFilterTypes, setInternalFilterTypes] = useState<ActivityType[]>([]);\n  const [loadingMore, setLoadingMore] = useState(false);\n\n  const activities = propActivities ?? demoActivities;\n  const filterTypes = propFilterTypes ?? internalFilterTypes;\n\n  const handleFilterChange = (types: ActivityType[]) => {\n    if (onFilter) {\n      onFilter(types);\n    } else {\n      setInternalFilterTypes(types);\n    }\n  };\n\n  const handleLoadMore = async () => {\n    if (onLoadMore) {\n      setLoadingMore(true);\n      try {\n        await onLoadMore();\n      } finally {\n        setLoadingMore(false);\n      }\n    }\n  };\n\n  // Filter activities if filter types are selected\n  const filteredActivities =\n    filterTypes.length > 0\n      ? activities.filter((a) => filterTypes.includes(a.type))\n      : activities;\n\n  return (\n    <Card className={cn(\"w-full max-w-2xl\", className)}>\n      <CardHeader>\n        <CardTitle>Activity Feed</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Filters */}\n        {showFilters && (\n          <ActivityFilters\n            selectedTypes={filterTypes}\n            onChange={handleFilterChange}\n          />\n        )}\n\n        {/* Activity List */}\n        <ScrollArea className=\"h-[500px] pr-4\">\n          <ActivityList\n            activities={filteredActivities}\n            isLoading={isLoading}\n          />\n\n          {/* Load More */}\n          {hasMore && filteredActivities.length > 0 && (\n            <div className=\"pt-4 flex justify-center\">\n              <Button\n                variant=\"outline\"\n                onClick={handleLoadMore}\n                disabled={loadingMore}\n              >\n                {loadingMore && <Loader2 className=\"size-4 mr-2 animate-spin\" />}\n                Load more\n              </Button>\n            </div>\n          )}\n\n          {/* Loading more skeleton */}\n          {loadingMore && (\n            <div className=\"pt-4 space-y-4\">\n              {Array.from({ length: 3 }).map((_, i) => (\n                <ActivitySkeleton key={i} />\n              ))}\n            </div>\n          )}\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}\n\n// =============================================================================\n// Named Exports\n// =============================================================================\n\nexport { ActivityFeed01 };\n\n// Re-export types\nexport type {\n  Activity,\n  ActivityType,\n  ActivityUser,\n  ActivityTarget,\n  ActivityFeedProps,\n} from \"./types/activity\";\n",
      "type": "registry:component",
      "target": "components/activity-feed-01/activity-feed.tsx"
    },
    {
      "path": "src/registry/blocks/activity-feed-01/types/activity.ts",
      "content": "// =============================================================================\n// Activity Feed Types\n// =============================================================================\n\nexport type ActivityType =\n  | \"created\"\n  | \"updated\"\n  | \"deleted\"\n  | \"commented\"\n  | \"mentioned\"\n  | \"assigned\"\n  | \"completed\"\n  | \"joined\"\n  | \"left\"\n  | \"uploaded\"\n  | \"shared\"\n  | \"liked\";\n\nexport interface ActivityUser {\n  id: string;\n  name: string;\n  avatar?: string;\n  email?: string;\n}\n\nexport interface ActivityTarget {\n  id: string;\n  type: string;\n  name: string;\n  href?: string;\n}\n\nexport interface Activity {\n  id: string;\n  type: ActivityType;\n  user: ActivityUser;\n  target?: ActivityTarget;\n  metadata?: Record<string, unknown>;\n  message?: string;\n  createdAt: string;\n}\n\nexport interface ActivityGroup {\n  date: string;\n  activities: Activity[];\n}\n\nexport interface ActivityFeedProps {\n  activities?: Activity[];\n  isLoading?: boolean;\n  hasMore?: boolean;\n  onLoadMore?: () => void;\n  onFilter?: (types: ActivityType[]) => void;\n  filterTypes?: ActivityType[];\n  showFilters?: boolean;\n  className?: string;\n}\n\nexport interface ActivityItemProps {\n  activity: Activity;\n  className?: string;\n}\n",
      "type": "registry:component",
      "target": "components/activity-feed-01/types/activity.ts"
    },
    {
      "path": "src/registry/blocks/activity-feed-01/components/index.ts",
      "content": "// Components\nexport { ActivityItem } from \"./activity-item\";\nexport { ActivityList } from \"./activity-list\";\nexport { ActivityFilters } from \"./activity-filters\";\nexport { ActivitySkeleton } from \"./activity-skeleton\";\n\n// Re-export types\nexport type {\n  ActivityType,\n  ActivityUser,\n  ActivityTarget,\n  Activity,\n  ActivityGroup,\n  ActivityFeedProps,\n  ActivityItemProps,\n} from \"../types/activity\";\n",
      "type": "registry:component",
      "target": "components/activity-feed-01/components/index.ts"
    },
    {
      "path": "src/registry/blocks/activity-feed-01/components/activity-item.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport {\n  Plus,\n  Pencil,\n  Trash2,\n  MessageSquare,\n  AtSign,\n  UserPlus,\n  CheckCircle,\n  LogIn,\n  LogOut,\n  Upload,\n  Share2,\n  Heart,\n  Circle,\n} from \"lucide-react\";\nimport type { Activity, ActivityType } from \"../types/activity\";\nimport { formatDistanceToNow } from \"date-fns\";\n\ninterface ActivityItemProps {\n  activity: Activity;\n  className?: string;\n}\n\nconst activityConfig: Record<ActivityType, { icon: typeof Plus; color: string; verb: string }> = {\n  created: { icon: Plus, color: \"text-green-500\", verb: \"created\" },\n  updated: { icon: Pencil, color: \"text-blue-500\", verb: \"updated\" },\n  deleted: { icon: Trash2, color: \"text-red-500\", verb: \"deleted\" },\n  commented: { icon: MessageSquare, color: \"text-purple-500\", verb: \"commented on\" },\n  mentioned: { icon: AtSign, color: \"text-orange-500\", verb: \"mentioned you in\" },\n  assigned: { icon: UserPlus, color: \"text-cyan-500\", verb: \"assigned\" },\n  completed: { icon: CheckCircle, color: \"text-green-500\", verb: \"completed\" },\n  joined: { icon: LogIn, color: \"text-blue-500\", verb: \"joined\" },\n  left: { icon: LogOut, color: \"text-gray-500\", verb: \"left\" },\n  uploaded: { icon: Upload, color: \"text-indigo-500\", verb: \"uploaded\" },\n  shared: { icon: Share2, color: \"text-pink-500\", verb: \"shared\" },\n  liked: { icon: Heart, color: \"text-red-500\", verb: \"liked\" },\n};\n\nexport function ActivityItem({ activity, className }: ActivityItemProps) {\n  const config = activityConfig[activity.type];\n  const Icon = config.icon;\n\n  const formatTime = (dateString: string) => {\n    try {\n      return formatDistanceToNow(new Date(dateString), { addSuffix: true });\n    } catch {\n      return dateString;\n    }\n  };\n\n  return (\n    <div className={cn(\"flex gap-3 py-3\", className)}>\n      {/* Timeline line and icon */}\n      <div className=\"relative flex flex-col items-center\">\n        <Avatar className=\"size-8 border-2 border-background z-10\">\n          <AvatarImage src={activity.user.avatar} />\n          <AvatarFallback className=\"text-xs\">\n            {activity.user.name.slice(0, 2).toUpperCase()}\n          </AvatarFallback>\n        </Avatar>\n        <div className=\"absolute top-10 bottom-0 w-px bg-border\" />\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 min-w-0 space-y-1\">\n        <div className=\"flex items-start gap-2\">\n          <div className={cn(\"size-5 rounded-full flex items-center justify-center mt-0.5\", config.color)}>\n            <Icon className=\"size-3\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm\">\n              <span className=\"font-medium\">{activity.user.name}</span>\n              <span className=\"text-muted-foreground\"> {config.verb} </span>\n              {activity.target && (\n                <>\n                  {activity.target.href ? (\n                    <a\n                      href={activity.target.href}\n                      className=\"font-medium hover:underline\"\n                    >\n                      {activity.target.name}\n                    </a>\n                  ) : (\n                    <span className=\"font-medium\">{activity.target.name}</span>\n                  )}\n                </>\n              )}\n            </p>\n            {activity.message && (\n              <p className=\"text-sm text-muted-foreground mt-1 line-clamp-2\">\n                \"{activity.message}\"\n              </p>\n            )}\n          </div>\n        </div>\n        <p className=\"text-xs text-muted-foreground pl-7\">\n          {formatTime(activity.createdAt)}\n        </p>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/activity-feed-01/components/activity-item.tsx"
    },
    {
      "path": "src/registry/blocks/activity-feed-01/components/activity-list.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { ActivityItem } from \"./activity-item\";\nimport { ActivitySkeleton } from \"./activity-skeleton\";\nimport type { Activity } from \"../types/activity\";\nimport { format, isToday, isYesterday, parseISO } from \"date-fns\";\n\ninterface ActivityListProps {\n  activities: Activity[];\n  isLoading?: boolean;\n  className?: string;\n}\n\nfunction groupActivitiesByDate(activities: Activity[]): Map<string, Activity[]> {\n  const groups = new Map<string, Activity[]>();\n\n  activities.forEach((activity) => {\n    const date = parseISO(activity.createdAt);\n    let key: string;\n\n    if (isToday(date)) {\n      key = \"Today\";\n    } else if (isYesterday(date)) {\n      key = \"Yesterday\";\n    } else {\n      key = format(date, \"MMMM d, yyyy\");\n    }\n\n    const existing = groups.get(key) || [];\n    groups.set(key, [...existing, activity]);\n  });\n\n  return groups;\n}\n\nexport function ActivityList({ activities, isLoading, className }: ActivityListProps) {\n  if (isLoading && activities.length === 0) {\n    return (\n      <div className={cn(\"space-y-4\", className)}>\n        {Array.from({ length: 5 }).map((_, i) => (\n          <ActivitySkeleton key={i} />\n        ))}\n      </div>\n    );\n  }\n\n  if (activities.length === 0) {\n    return (\n      <div className={cn(\"py-12 text-center\", className)}>\n        <p className=\"text-muted-foreground\">No activity yet</p>\n      </div>\n    );\n  }\n\n  const groupedActivities = groupActivitiesByDate(activities);\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      {Array.from(groupedActivities.entries()).map(([date, dateActivities]) => (\n        <div key={date}>\n          <h3 className=\"text-sm font-medium text-muted-foreground mb-3 sticky top-0 bg-background py-1\">\n            {date}\n          </h3>\n          <div className=\"space-y-0\">\n            {dateActivities.map((activity, index) => (\n              <div key={activity.id} className=\"relative\">\n                <ActivityItem activity={activity} />\n                {/* Hide last timeline line */}\n                {index === dateActivities.length - 1 && (\n                  <div className=\"absolute left-4 top-10 bottom-0 w-px bg-background\" />\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/activity-feed-01/components/activity-list.tsx"
    },
    {
      "path": "src/registry/blocks/activity-feed-01/components/activity-filters.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Plus,\n  Pencil,\n  Trash2,\n  MessageSquare,\n  AtSign,\n  UserPlus,\n  CheckCircle,\n  Upload,\n  Share2,\n  Heart,\n  Filter,\n  X,\n} from \"lucide-react\";\nimport type { ActivityType } from \"../types/activity\";\n\ninterface ActivityFiltersProps {\n  selectedTypes: ActivityType[];\n  onChange: (types: ActivityType[]) => void;\n  className?: string;\n}\n\nconst filterOptions: { type: ActivityType; label: string; icon: typeof Plus }[] = [\n  { type: \"created\", label: \"Created\", icon: Plus },\n  { type: \"updated\", label: \"Updated\", icon: Pencil },\n  { type: \"deleted\", label: \"Deleted\", icon: Trash2 },\n  { type: \"commented\", label: \"Comments\", icon: MessageSquare },\n  { type: \"mentioned\", label: \"Mentions\", icon: AtSign },\n  { type: \"assigned\", label: \"Assigned\", icon: UserPlus },\n  { type: \"completed\", label: \"Completed\", icon: CheckCircle },\n  { type: \"uploaded\", label: \"Uploads\", icon: Upload },\n  { type: \"shared\", label: \"Shared\", icon: Share2 },\n  { type: \"liked\", label: \"Likes\", icon: Heart },\n];\n\nexport function ActivityFilters({\n  selectedTypes,\n  onChange,\n  className,\n}: ActivityFiltersProps) {\n  const toggleType = (type: ActivityType) => {\n    if (selectedTypes.includes(type)) {\n      onChange(selectedTypes.filter((t) => t !== type));\n    } else {\n      onChange([...selectedTypes, type]);\n    }\n  };\n\n  const clearAll = () => {\n    onChange([]);\n  };\n\n  return (\n    <div className={cn(\"space-y-2\", className)}>\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n          <Filter className=\"size-4\" />\n          <span>Filter by type</span>\n        </div>\n        {selectedTypes.length > 0 && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={clearAll}\n            className=\"h-auto py-1 px-2 text-xs\"\n          >\n            <X className=\"size-3 mr-1\" />\n            Clear\n          </Button>\n        )}\n      </div>\n      <div className=\"flex flex-wrap gap-2\">\n        {filterOptions.map((option) => {\n          const Icon = option.icon;\n          const isSelected = selectedTypes.includes(option.type);\n          return (\n            <Badge\n              key={option.type}\n              variant={isSelected ? \"default\" : \"outline\"}\n              className={cn(\n                \"cursor-pointer transition-colors\",\n                !isSelected && \"hover:bg-muted\"\n              )}\n              onClick={() => toggleType(option.type)}\n            >\n              <Icon className=\"size-3 mr-1\" />\n              {option.label}\n            </Badge>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/activity-feed-01/components/activity-filters.tsx"
    },
    {
      "path": "src/registry/blocks/activity-feed-01/components/activity-skeleton.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\ninterface ActivitySkeletonProps {\n  className?: string;\n}\n\nexport function ActivitySkeleton({ className }: ActivitySkeletonProps) {\n  return (\n    <div className={cn(\"flex gap-3 py-3\", className)}>\n      <Skeleton className=\"size-8 rounded-full shrink-0\" />\n      <div className=\"flex-1 space-y-2\">\n        <div className=\"flex items-center gap-2\">\n          <Skeleton className=\"size-5 rounded-full\" />\n          <Skeleton className=\"h-4 w-48\" />\n        </div>\n        <Skeleton className=\"h-3 w-24 ml-7\" />\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/activity-feed-01/components/activity-skeleton.tsx"
    }
  ],
  "meta": {
    "image": "/r/previews/activity-feed-01.webp",
    "stacks": [
      "supabase",
      "postgres"
    ]
  },
  "categories": [
    "activity-feed"
  ],
  "type": "registry:block"
}