{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "command-01",
  "title": "Command 01",
  "description": "A command palette with Cmd+K shortcut, fuzzy search, grouped results, and keyboard navigation",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "dialog",
    "scroll-area",
    "separator"
  ],
  "files": [
    {
      "path": "src/registry/blocks/command-01/command.tsx",
      "content": "\"use client\";\n\nimport { useRef, useEffect } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandItem,\n  CommandEmpty,\n} from \"./components\";\nimport { CommandGroup } from \"./components/command-list\";\nimport { useCommandPalette } from \"./hooks/use-command-palette\";\nimport type { CommandItem as CommandItemType, CommandPaletteProps, CommandGroup as CommandGroupType } from \"./types/command\";\nimport {\n  Home,\n  FileText,\n  Settings,\n  User,\n  Bell,\n  HelpCircle,\n  LogOut,\n  Moon,\n  Sun,\n  Search,\n  Plus,\n  FolderOpen,\n  Mail,\n  Calendar,\n  Command,\n} from \"lucide-react\";\n\n// =============================================================================\n// Demo Items\n// =============================================================================\n\nconst createDemoItems = (): CommandItemType[] => [\n  // Recent\n  {\n    id: \"recent-1\",\n    label: \"Dashboard\",\n    icon: <Home className=\"size-4\" />,\n    group: \"recent\",\n    shortcut: [\"G\", \"D\"],\n    onSelect: () => console.log(\"Navigate to Dashboard\"),\n    keywords: [\"home\", \"overview\"],\n  },\n  {\n    id: \"recent-2\",\n    label: \"Settings\",\n    icon: <Settings className=\"size-4\" />,\n    group: \"recent\",\n    shortcut: [\"G\", \"S\"],\n    onSelect: () => console.log(\"Navigate to Settings\"),\n    keywords: [\"preferences\", \"config\"],\n  },\n\n  // Pages\n  {\n    id: \"page-1\",\n    label: \"Home\",\n    description: \"Go to homepage\",\n    icon: <Home className=\"size-4\" />,\n    group: \"pages\",\n    onSelect: () => console.log(\"Navigate to Home\"),\n    keywords: [\"main\", \"landing\"],\n  },\n  {\n    id: \"page-2\",\n    label: \"Documents\",\n    description: \"View all documents\",\n    icon: <FileText className=\"size-4\" />,\n    group: \"pages\",\n    onSelect: () => console.log(\"Navigate to Documents\"),\n    keywords: [\"files\", \"docs\"],\n  },\n  {\n    id: \"page-3\",\n    label: \"Projects\",\n    description: \"Manage your projects\",\n    icon: <FolderOpen className=\"size-4\" />,\n    group: \"pages\",\n    onSelect: () => console.log(\"Navigate to Projects\"),\n    keywords: [\"workspace\", \"tasks\"],\n  },\n  {\n    id: \"page-4\",\n    label: \"Calendar\",\n    description: \"View calendar\",\n    icon: <Calendar className=\"size-4\" />,\n    group: \"pages\",\n    onSelect: () => console.log(\"Navigate to Calendar\"),\n    keywords: [\"schedule\", \"events\"],\n  },\n\n  // Actions\n  {\n    id: \"action-1\",\n    label: \"New Document\",\n    description: \"Create a new document\",\n    icon: <Plus className=\"size-4\" />,\n    group: \"actions\",\n    shortcut: [\"Ctrl\", \"N\"],\n    onSelect: () => console.log(\"Create new document\"),\n    keywords: [\"create\", \"add\"],\n  },\n  {\n    id: \"action-2\",\n    label: \"Search Files\",\n    description: \"Search through your files\",\n    icon: <Search className=\"size-4\" />,\n    group: \"actions\",\n    shortcut: [\"Ctrl\", \"F\"],\n    onSelect: () => console.log(\"Open file search\"),\n    keywords: [\"find\", \"lookup\"],\n  },\n  {\n    id: \"action-3\",\n    label: \"Send Message\",\n    description: \"Compose a new message\",\n    icon: <Mail className=\"size-4\" />,\n    group: \"actions\",\n    onSelect: () => console.log(\"Open message composer\"),\n    keywords: [\"email\", \"write\"],\n  },\n\n  // Settings\n  {\n    id: \"settings-1\",\n    label: \"Profile\",\n    description: \"Edit your profile\",\n    icon: <User className=\"size-4\" />,\n    group: \"settings\",\n    onSelect: () => console.log(\"Navigate to Profile\"),\n    keywords: [\"account\", \"user\"],\n  },\n  {\n    id: \"settings-2\",\n    label: \"Notifications\",\n    description: \"Manage notifications\",\n    icon: <Bell className=\"size-4\" />,\n    group: \"settings\",\n    onSelect: () => console.log(\"Navigate to Notifications\"),\n    keywords: [\"alerts\", \"push\"],\n  },\n  {\n    id: \"settings-3\",\n    label: \"Toggle Dark Mode\",\n    description: \"Switch theme\",\n    icon: <Moon className=\"size-4\" />,\n    group: \"settings\",\n    onSelect: () => console.log(\"Toggle theme\"),\n    keywords: [\"theme\", \"light\", \"appearance\"],\n  },\n  {\n    id: \"settings-4\",\n    label: \"Help & Support\",\n    description: \"Get help\",\n    icon: <HelpCircle className=\"size-4\" />,\n    group: \"settings\",\n    onSelect: () => console.log(\"Open help\"),\n    keywords: [\"documentation\", \"faq\"],\n  },\n  {\n    id: \"settings-5\",\n    label: \"Sign Out\",\n    description: \"Log out of your account\",\n    icon: <LogOut className=\"size-4\" />,\n    group: \"settings\",\n    onSelect: () => console.log(\"Sign out\"),\n    keywords: [\"logout\", \"exit\"],\n  },\n];\n\n// =============================================================================\n// Group Labels\n// =============================================================================\n\nconst groupLabels: Record<CommandGroupType, string> = {\n  recent: \"Recent\",\n  pages: \"Pages\",\n  actions: \"Actions\",\n  settings: \"Settings\",\n  search: \"Search Results\",\n};\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport default function Command01({\n  items = createDemoItems(),\n  placeholder = \"Type a command or search...\",\n  emptyMessage = \"No results found.\",\n  open: controlledOpen,\n  onOpenChange,\n  className,\n}: CommandPaletteProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const {\n    open,\n    setOpen,\n    search,\n    setSearch,\n    selectedIndex,\n    setSelectedIndex,\n    groupedItems,\n    flattenedItems,\n    handleKeyDown,\n    selectItem,\n  } = useCommandPalette({\n    items,\n    open: controlledOpen,\n    onOpenChange,\n  });\n\n  // Focus input when dialog opens\n  useEffect(() => {\n    if (open) {\n      setTimeout(() => inputRef.current?.focus(), 0);\n    }\n  }, [open]);\n\n  // Get flat index for an item\n  const getFlatIndex = (groupIndex: number, itemIndex: number): number => {\n    let index = 0;\n    for (let i = 0; i < groupIndex; i++) {\n      index += groupedItems[i].items.length;\n    }\n    return index + itemIndex;\n  };\n\n  return (\n    <div className={cn(className)}>\n      {/* Trigger Button */}\n      <Button\n        variant=\"outline\"\n        className=\"relative h-9 w-full justify-start text-sm text-muted-foreground sm:pr-12 md:w-64\"\n        onClick={() => setOpen(true)}\n      >\n        <Search className=\"mr-2 size-4\" />\n        <span className=\"hidden sm:inline-flex\">Search commands...</span>\n        <span className=\"inline-flex sm:hidden\">Search...</span>\n        <kbd className=\"pointer-events-none absolute right-1.5 top-1.5 hidden h-6 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground sm:flex\">\n          <Command className=\"size-3\" />K\n        </kbd>\n      </Button>\n\n      {/* Command Dialog */}\n      <CommandDialog open={open} onOpenChange={setOpen}>\n        <div onKeyDown={handleKeyDown}>\n          <CommandInput\n            ref={inputRef}\n            value={search}\n            onValueChange={setSearch}\n            placeholder={placeholder}\n          />\n\n          <CommandList>\n            {groupedItems.length === 0 ? (\n              <CommandEmpty message={emptyMessage} />\n            ) : (\n              groupedItems.map((group, groupIndex) => (\n                <CommandGroup key={group.id} heading={groupLabels[group.id]}>\n                  {group.items.map((item, itemIndex) => {\n                    const flatIndex = getFlatIndex(groupIndex, itemIndex);\n                    return (\n                      <CommandItem\n                        key={item.id}\n                        icon={item.icon}\n                        label={item.label}\n                        description={item.description}\n                        shortcut={item.shortcut}\n                        selected={flatIndex === selectedIndex}\n                        disabled={item.disabled}\n                        onSelect={() => selectItem(item)}\n                      />\n                    );\n                  })}\n                </CommandGroup>\n              ))\n            )}\n          </CommandList>\n\n          {/* Footer */}\n          <div className=\"border-t px-3 py-2\">\n            <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n              <div className=\"flex items-center gap-2\">\n                <kbd className=\"rounded border bg-muted px-1.5 py-0.5 font-mono text-[10px]\">\n                  ↑↓\n                </kbd>\n                <span>Navigate</span>\n                <kbd className=\"rounded border bg-muted px-1.5 py-0.5 font-mono text-[10px]\">\n                  ↵\n                </kbd>\n                <span>Select</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <kbd className=\"rounded border bg-muted px-1.5 py-0.5 font-mono text-[10px]\">\n                  esc\n                </kbd>\n                <span>Close</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </CommandDialog>\n    </div>\n  );\n}\n\n// =============================================================================\n// Named Exports\n// =============================================================================\n\nexport { Command01 };\n\n// Re-export types and hook\nexport type { CommandItem, CommandGroup, CommandPaletteProps } from \"./types/command\";\nexport { useCommandPalette } from \"./hooks/use-command-palette\";\n",
      "type": "registry:component",
      "target": "components/command-01/command.tsx"
    },
    {
      "path": "src/registry/blocks/command-01/types/command.ts",
      "content": "// =============================================================================\n// Command Palette Types\n// =============================================================================\n\nexport type CommandGroup = \"pages\" | \"actions\" | \"settings\" | \"recent\" | \"search\";\n\nexport interface CommandItem {\n  id: string;\n  label: string;\n  description?: string;\n  icon?: React.ReactNode;\n  shortcut?: string[];\n  group: CommandGroup;\n  onSelect: () => void;\n  keywords?: string[];\n  disabled?: boolean;\n}\n\nexport interface CommandGroupConfig {\n  id: CommandGroup;\n  label: string;\n  priority: number;\n}\n\nexport interface CommandPaletteState {\n  open: boolean;\n  search: string;\n  selectedIndex: number;\n}\n\nexport interface CommandPaletteProps {\n  items?: CommandItem[];\n  placeholder?: string;\n  emptyMessage?: string;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  className?: string;\n}\n",
      "type": "registry:component",
      "target": "components/command-01/types/command.ts"
    },
    {
      "path": "src/registry/blocks/command-01/components/index.ts",
      "content": "// Components\nexport { CommandDialog } from \"./command-dialog\";\nexport { CommandInput } from \"./command-input\";\nexport { CommandList } from \"./command-list\";\nexport { CommandItem } from \"./command-item\";\nexport { CommandEmpty } from \"./command-empty\";\n\n// Re-export types\nexport type {\n  CommandGroup,\n  CommandItem as CommandItemType,\n  CommandGroupConfig,\n  CommandPaletteState,\n  CommandPaletteProps,\n} from \"../types/command\";\n",
      "type": "registry:component",
      "target": "components/command-01/components/index.ts"
    },
    {
      "path": "src/registry/blocks/command-01/components/command-dialog.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport {\n  Dialog,\n  DialogContent,\n} from \"@/components/ui/dialog\";\n\ninterface CommandDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport function CommandDialog({\n  open,\n  onOpenChange,\n  children,\n  className,\n}: CommandDialogProps) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent\n        className={cn(\n          \"overflow-hidden p-0 shadow-lg max-w-[640px]\",\n          className\n        )}\n      >\n        {children}\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/command-01/components/command-dialog.tsx"
    },
    {
      "path": "src/registry/blocks/command-01/components/command-input.tsx",
      "content": "\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Search } from \"lucide-react\";\n\ninterface CommandInputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  value: string;\n  onValueChange: (value: string) => void;\n}\n\nexport const CommandInput = forwardRef<HTMLInputElement, CommandInputProps>(\n  ({ value, onValueChange, placeholder = \"Type a command or search...\", className, ...props }, ref) => {\n    return (\n      <div className={cn(\"flex items-center border-b px-3\", className)}>\n        <Search className=\"mr-2 size-4 shrink-0 text-muted-foreground\" />\n        <input\n          ref={ref}\n          type=\"text\"\n          value={value}\n          onChange={(e) => onValueChange(e.target.value)}\n          placeholder={placeholder}\n          className=\"flex h-12 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\"\n          {...props}\n        />\n        <kbd className=\"pointer-events-none hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground sm:flex\">\n          <span className=\"text-xs\">esc</span>\n        </kbd>\n      </div>\n    );\n  }\n);\n\nCommandInput.displayName = \"CommandInput\";\n",
      "type": "registry:component",
      "target": "components/command-01/components/command-input.tsx"
    },
    {
      "path": "src/registry/blocks/command-01/components/command-list.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\n\ninterface CommandListProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport function CommandList({ children, className }: CommandListProps) {\n  return (\n    <ScrollArea className={cn(\"max-h-[400px] overflow-y-auto\", className)}>\n      <div className=\"p-2\">{children}</div>\n    </ScrollArea>\n  );\n}\n\ninterface CommandGroupProps {\n  heading: string;\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport function CommandGroup({ heading, children, className }: CommandGroupProps) {\n  return (\n    <div className={cn(\"mb-2\", className)}>\n      <div className=\"px-2 py-1.5 text-xs font-medium text-muted-foreground\">\n        {heading}\n      </div>\n      <div className=\"space-y-1\">{children}</div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/command-01/components/command-list.tsx"
    },
    {
      "path": "src/registry/blocks/command-01/components/command-item.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\n\ninterface CommandItemProps {\n  icon?: React.ReactNode;\n  label: string;\n  description?: string;\n  shortcut?: string[];\n  selected?: boolean;\n  disabled?: boolean;\n  onSelect: () => void;\n  className?: string;\n}\n\nexport function CommandItem({\n  icon,\n  label,\n  description,\n  shortcut,\n  selected,\n  disabled,\n  onSelect,\n  className,\n}: CommandItemProps) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onSelect}\n      disabled={disabled}\n      className={cn(\n        \"relative flex w-full cursor-default select-none items-center rounded-md px-2 py-2 text-sm outline-none transition-colors\",\n        selected && \"bg-accent text-accent-foreground\",\n        !selected && \"hover:bg-accent/50\",\n        disabled && \"pointer-events-none opacity-50\",\n        className\n      )}\n    >\n      {icon && <span className=\"mr-3 size-4 shrink-0\">{icon}</span>}\n      <div className=\"flex-1 text-left\">\n        <span className=\"font-medium\">{label}</span>\n        {description && (\n          <span className=\"ml-2 text-muted-foreground\">{description}</span>\n        )}\n      </div>\n      {shortcut && shortcut.length > 0 && (\n        <div className=\"ml-auto flex gap-1\">\n          {shortcut.map((key, index) => (\n            <kbd\n              key={index}\n              className=\"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground\"\n            >\n              {key}\n            </kbd>\n          ))}\n        </div>\n      )}\n    </button>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/command-01/components/command-item.tsx"
    },
    {
      "path": "src/registry/blocks/command-01/components/command-empty.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Search } from \"lucide-react\";\n\ninterface CommandEmptyProps {\n  message?: string;\n  className?: string;\n}\n\nexport function CommandEmpty({\n  message = \"No results found.\",\n  className,\n}: CommandEmptyProps) {\n  return (\n    <div className={cn(\"py-6 text-center\", className)}>\n      <Search className=\"mx-auto size-8 text-muted-foreground/50 mb-2\" />\n      <p className=\"text-sm text-muted-foreground\">{message}</p>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/command-01/components/command-empty.tsx"
    },
    {
      "path": "src/registry/blocks/command-01/hooks/use-command-palette.ts",
      "content": "\"use client\";\n\nimport { useState, useEffect, useCallback, useMemo } from \"react\";\nimport type { CommandItem, CommandGroup } from \"../types/command\";\n\ninterface UseCommandPaletteOptions {\n  items: CommandItem[];\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n}\n\nexport function useCommandPalette({\n  items,\n  open: controlledOpen,\n  onOpenChange,\n}: UseCommandPaletteOptions) {\n  const [internalOpen, setInternalOpen] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  // Use controlled or internal state\n  const open = controlledOpen ?? internalOpen;\n  const setOpen = useCallback(\n    (value: boolean) => {\n      if (onOpenChange) {\n        onOpenChange(value);\n      } else {\n        setInternalOpen(value);\n      }\n    },\n    [onOpenChange]\n  );\n\n  // Fuzzy search function\n  const fuzzyMatch = (text: string, query: string): boolean => {\n    const pattern = query\n      .toLowerCase()\n      .split(\"\")\n      .map((char) => char.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"))\n      .join(\".*\");\n    const regex = new RegExp(pattern, \"i\");\n    return regex.test(text.toLowerCase());\n  };\n\n  // Filter and group items based on search\n  const filteredItems = useMemo(() => {\n    if (!search.trim()) return items;\n\n    return items.filter((item) => {\n      const searchLower = search.toLowerCase();\n      const labelMatch = fuzzyMatch(item.label, search);\n      const descriptionMatch = item.description\n        ? fuzzyMatch(item.description, search)\n        : false;\n      const keywordMatch = item.keywords?.some(\n        (keyword) => fuzzyMatch(keyword, search) || keyword.toLowerCase().includes(searchLower)\n      );\n\n      return labelMatch || descriptionMatch || keywordMatch;\n    });\n  }, [items, search]);\n\n  // Group filtered items\n  const groupedItems = useMemo(() => {\n    const groups: Record<CommandGroup, CommandItem[]> = {\n      recent: [],\n      pages: [],\n      actions: [],\n      settings: [],\n      search: [],\n    };\n\n    filteredItems.forEach((item) => {\n      groups[item.group].push(item);\n    });\n\n    // Return only non-empty groups in order\n    const groupOrder: CommandGroup[] = [\"recent\", \"pages\", \"actions\", \"settings\", \"search\"];\n    return groupOrder\n      .filter((group) => groups[group].length > 0)\n      .map((group) => ({\n        id: group,\n        items: groups[group],\n      }));\n  }, [filteredItems]);\n\n  // Flatten items for keyboard navigation\n  const flattenedItems = useMemo(() => {\n    return groupedItems.flatMap((group) => group.items);\n  }, [groupedItems]);\n\n  // Reset selection when search changes\n  useEffect(() => {\n    setSelectedIndex(0);\n  }, [search]);\n\n  // Reset search when dialog closes\n  useEffect(() => {\n    if (!open) {\n      setSearch(\"\");\n      setSelectedIndex(0);\n    }\n  }, [open]);\n\n  // Keyboard shortcut to open\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Cmd+K or Ctrl+K to open\n      if ((e.metaKey || e.ctrlKey) && e.key === \"k\") {\n        e.preventDefault();\n        setOpen(!open);\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => document.removeEventListener(\"keydown\", handleKeyDown);\n  }, [open, setOpen]);\n\n  // Keyboard navigation within dialog\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      switch (e.key) {\n        case \"ArrowDown\":\n          e.preventDefault();\n          setSelectedIndex((prev) =>\n            prev < flattenedItems.length - 1 ? prev + 1 : 0\n          );\n          break;\n        case \"ArrowUp\":\n          e.preventDefault();\n          setSelectedIndex((prev) =>\n            prev > 0 ? prev - 1 : flattenedItems.length - 1\n          );\n          break;\n        case \"Enter\":\n          e.preventDefault();\n          if (flattenedItems[selectedIndex] && !flattenedItems[selectedIndex].disabled) {\n            flattenedItems[selectedIndex].onSelect();\n            setOpen(false);\n          }\n          break;\n        case \"Escape\":\n          e.preventDefault();\n          setOpen(false);\n          break;\n      }\n    },\n    [flattenedItems, selectedIndex, setOpen]\n  );\n\n  const selectItem = useCallback(\n    (item: CommandItem) => {\n      if (!item.disabled) {\n        item.onSelect();\n        setOpen(false);\n      }\n    },\n    [setOpen]\n  );\n\n  return {\n    open,\n    setOpen,\n    search,\n    setSearch,\n    selectedIndex,\n    setSelectedIndex,\n    groupedItems,\n    flattenedItems,\n    handleKeyDown,\n    selectItem,\n  };\n}\n",
      "type": "registry:component",
      "target": "components/command-01/hooks/use-command-palette.ts"
    }
  ],
  "meta": {
    "image": "/r/previews/command-01.webp"
  },
  "categories": [
    "command"
  ],
  "type": "registry:block"
}