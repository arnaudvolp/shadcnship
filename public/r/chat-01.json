{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "chat-01",
  "title": "Chat 01",
  "description": "A real-time chat interface with message bubbles, typing indicators, and attachments",
  "dependencies": [
    "lucide-react",
    "date-fns"
  ],
  "registryDependencies": [
    "button",
    "card",
    "avatar",
    "input",
    "textarea",
    "dropdown-menu",
    "scroll-area",
    "tooltip"
  ],
  "files": [
    {
      "path": "src/registry/blocks/chat-01/chat.tsx",
      "content": "\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { MessageBubble, ChatInput, TypingIndicator } from \"./components\";\nimport type { ChatMessage, ChatUser, ChatProps } from \"./types/chat\";\n\n// =============================================================================\n// Demo Data\n// =============================================================================\n\nconst currentUser: ChatUser = {\n  id: \"user_1\",\n  name: \"You\",\n  avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=you\",\n  status: \"online\",\n};\n\nconst assistant: ChatUser = {\n  id: \"assistant\",\n  name: \"Assistant\",\n  avatar: \"\",\n  status: \"online\",\n};\n\nconst demoMessages: ChatMessage[] = [\n  {\n    id: \"msg_1\",\n    content: \"Hello! How can I help you today?\",\n    sender: assistant,\n    timestamp: new Date(Date.now() - 60 * 60 * 1000).toISOString(),\n    status: \"read\",\n  },\n  {\n    id: \"msg_2\",\n    content: \"I'm working on a React project and need help with state management. What are the best practices for managing complex state in a large application?\",\n    sender: currentUser,\n    timestamp: new Date(Date.now() - 55 * 60 * 1000).toISOString(),\n    status: \"read\",\n  },\n  {\n    id: \"msg_3\",\n    content: `Great question! Here are some best practices for managing complex state in React applications:\n\n**1. Choose the right tool for the job**\n- **Local state (useState)**: For component-specific UI state\n- **Context API**: For app-wide state that doesn't change frequently\n- **State libraries (Redux, Zustand, Jotai)**: For complex, frequently changing state\n\n**2. Normalize your state**\n- Avoid deeply nested structures\n- Use flat, normalized data with IDs as references\n- This makes updates more predictable and efficient\n\n**3. Separate server and client state**\n- Use React Query or SWR for server state\n- Keep UI state separate from data fetched from APIs\n\n**4. Colocate state when possible**\n- Keep state close to where it's used\n- Lift state up only when necessary\n\nWould you like me to elaborate on any of these points?`,\n    sender: assistant,\n    timestamp: new Date(Date.now() - 50 * 60 * 1000).toISOString(),\n    status: \"read\",\n  },\n  {\n    id: \"msg_4\",\n    content: \"Can you show me an example of using Zustand for global state?\",\n    sender: currentUser,\n    timestamp: new Date(Date.now() - 45 * 60 * 1000).toISOString(),\n    status: \"read\",\n  },\n  {\n    id: \"msg_5\",\n    content: `Here's a practical Zustand example:\n\n\\`\\`\\`typescript\nimport { create } from 'zustand'\n\ninterface UserStore {\n  user: User | null\n  isAuthenticated: boolean\n  login: (user: User) => void\n  logout: () => void\n}\n\nconst useUserStore = create<UserStore>((set) => ({\n  user: null,\n  isAuthenticated: false,\n  login: (user) => set({ user, isAuthenticated: true }),\n  logout: () => set({ user: null, isAuthenticated: false }),\n}))\n\n// Usage in components\nfunction Profile() {\n  const { user, logout } = useUserStore()\n  return (\n    <div>\n      <p>Welcome, {user?.name}</p>\n      <button onClick={logout}>Logout</button>\n    </div>\n  )\n}\n\\`\\`\\`\n\nZustand is lightweight, has no boilerplate, and works great with TypeScript!`,\n    sender: assistant,\n    timestamp: new Date(Date.now() - 40 * 60 * 1000).toISOString(),\n    status: \"read\",\n  },\n];\n\n// =============================================================================\n// Chat Component\n// =============================================================================\n\nexport default function Chat({\n  messages: externalMessages,\n  currentUser: externalCurrentUser,\n  onSendMessage,\n  onTyping,\n  isLoading,\n  className,\n}: ChatProps) {\n  const [internalMessages, setInternalMessages] = useState<ChatMessage[]>(demoMessages);\n  const [typingUsers, setTypingUsers] = useState<ChatUser[]>([]);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Use external data if provided\n  const messages = externalMessages ?? internalMessages;\n  const user = externalCurrentUser ?? currentUser;\n\n  // Scroll to bottom on new messages\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  // Handle sending messages\n  const handleSendMessage = async (content: string, attachments?: File[]) => {\n    if (onSendMessage) {\n      await onSendMessage(content, attachments);\n    } else {\n      // Demo: add message to internal state\n      const newMessage: ChatMessage = {\n        id: `msg_${Date.now()}`,\n        content,\n        sender: user,\n        timestamp: new Date().toISOString(),\n        status: \"sending\",\n        attachments: attachments?.map((file, idx) => ({\n          id: `att_${Date.now()}_${idx}`,\n          type: file.type.startsWith(\"image/\") ? \"image\" : \"file\",\n          name: file.name,\n          url: URL.createObjectURL(file),\n          size: file.size,\n          mimeType: file.type,\n        })),\n      };\n\n      setInternalMessages((prev) => [...prev, newMessage]);\n\n      // Simulate status updates\n      setTimeout(() => {\n        setInternalMessages((prev) =>\n          prev.map((m) =>\n            m.id === newMessage.id ? { ...m, status: \"sent\" } : m\n          )\n        );\n      }, 500);\n\n      setTimeout(() => {\n        setInternalMessages((prev) =>\n          prev.map((m) =>\n            m.id === newMessage.id ? { ...m, status: \"delivered\" } : m\n          )\n        );\n      }, 1000);\n\n      // Simulate auto-reply\n      setTimeout(() => {\n        setTypingUsers([assistant]);\n        setTimeout(() => {\n          setTypingUsers([]);\n          const replies = [\n            \"That's a great point! Let me help you with that.\",\n            \"I understand. Here's what I would suggest...\",\n            \"Interesting question! There are several approaches to consider.\",\n            \"Good thinking! Let me elaborate on that.\",\n            \"Absolutely! Here's how you can approach this problem.\",\n          ];\n          const reply: ChatMessage = {\n            id: `msg_reply_${Date.now()}`,\n            content: replies[Math.floor(Math.random() * replies.length)],\n            sender: assistant,\n            timestamp: new Date().toISOString(),\n            status: \"read\",\n          };\n          setInternalMessages((prev) => [...prev, reply]);\n        }, 2000);\n      }, 1500);\n    }\n  };\n\n  return (\n    <div className={cn(\"flex h-[700px] w-full bg-background border rounded-lg\", className)}>\n      {/* Main Chat Area */}\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        {/* Header - Minimal */}\n        <div className=\"flex items-center justify-center h-14 px-4 border-b\">\n          <h1 className=\"text-sm font-medium\">New Chat</h1>\n        </div>\n\n        {/* Messages Area - Scrollable */}\n        <div className=\"flex-1 overflow-y-auto\">\n          <div className=\"min-h-full flex flex-col\">\n            {/* Messages */}\n            <div className=\"flex-1\">\n              {messages.map((message) => (\n                <MessageBubble\n                  key={message.id}\n                  message={message}\n                  isOwn={message.sender.id === user.id}\n                />\n              ))}\n              <div ref={messagesEndRef} />\n            </div>\n          </div>\n        </div>\n\n        {/* Typing indicator */}\n        {typingUsers.length > 0 && (\n          <div className=\"max-w-3xl mx-auto w-full px-4\">\n            <TypingIndicator users={typingUsers} />\n          </div>\n        )}\n\n        {/* Input - Centered at bottom */}\n        <div className=\"border-t bg-background\">\n          <div className=\"max-w-3xl mx-auto\">\n            <ChatInput\n              onSend={handleSendMessage}\n              onTyping={onTyping}\n              disabled={isLoading}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/chat-01/chat.tsx"
    },
    {
      "path": "src/registry/blocks/chat-01/types/chat.ts",
      "content": "// =============================================================================\n// Chat Types\n// =============================================================================\n\nexport type MessageStatus = \"sending\" | \"sent\" | \"delivered\" | \"read\" | \"failed\";\n\nexport interface ChatUser {\n  id: string;\n  name: string;\n  avatar?: string;\n  status?: \"online\" | \"offline\" | \"away\" | \"busy\";\n  lastSeen?: string;\n}\n\nexport interface ChatAttachment {\n  id: string;\n  type: \"image\" | \"file\" | \"audio\";\n  name: string;\n  url: string;\n  size?: number;\n  mimeType?: string;\n}\n\nexport interface ChatMessage {\n  id: string;\n  content: string;\n  sender: ChatUser;\n  timestamp: string;\n  status: MessageStatus;\n  attachments?: ChatAttachment[];\n  replyTo?: {\n    id: string;\n    content: string;\n    sender: string;\n  };\n  reactions?: {\n    emoji: string;\n    users: string[];\n  }[];\n  isEdited?: boolean;\n}\n\nexport interface ChatConversation {\n  id: string;\n  type: \"direct\" | \"group\";\n  name?: string;\n  avatar?: string;\n  participants: ChatUser[];\n  lastMessage?: ChatMessage;\n  unreadCount?: number;\n  isPinned?: boolean;\n  isMuted?: boolean;\n}\n\nexport interface ChatProps {\n  conversation?: ChatConversation;\n  messages?: ChatMessage[];\n  currentUser?: ChatUser;\n  onSendMessage?: (content: string, attachments?: File[]) => Promise<void>;\n  onTyping?: () => void;\n  onMessageReaction?: (messageId: string, emoji: string) => void;\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport interface MessageBubbleProps {\n  message: ChatMessage;\n  isOwn: boolean;\n  showAvatar?: boolean;\n  onReaction?: (messageId: string, emoji: string) => void;\n}\n\nexport interface ChatInputProps {\n  onSend: (content: string, attachments?: File[]) => void;\n  onTyping?: () => void;\n  disabled?: boolean;\n  placeholder?: string;\n}\n\nexport interface ConversationHeaderProps {\n  conversation: ChatConversation;\n  currentUser?: ChatUser;\n}\n",
      "type": "registry:component",
      "target": "components/chat-01/types/chat.ts"
    },
    {
      "path": "src/registry/blocks/chat-01/components/index.ts",
      "content": "// Components\nexport { MessageBubble } from \"./message-bubble\";\nexport { ChatInput } from \"./chat-input\";\nexport { ConversationHeader } from \"./conversation-header\";\nexport { TypingIndicator } from \"./typing-indicator\";\n\n// Re-export types\nexport type {\n  MessageStatus,\n  ChatUser,\n  ChatAttachment,\n  ChatMessage,\n  ChatConversation,\n  ChatProps,\n  MessageBubbleProps,\n  ChatInputProps,\n  ConversationHeaderProps,\n} from \"../types/chat\";\n",
      "type": "registry:component",
      "target": "components/chat-01/components/index.ts"
    },
    {
      "path": "src/registry/blocks/chat-01/components/conversation-header.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Phone,\n  Video,\n  MoreVertical,\n  Search,\n  Bell,\n  BellOff,\n  Pin,\n  Trash2,\n  Users,\n} from \"lucide-react\";\nimport type { ChatConversation, ChatUser } from \"../types/chat\";\n\ninterface ConversationHeaderProps {\n  conversation: ChatConversation;\n  currentUser?: ChatUser;\n  className?: string;\n}\n\nexport function ConversationHeader({\n  conversation,\n  currentUser,\n  className,\n}: ConversationHeaderProps) {\n  const isGroup = conversation.type === \"group\";\n  const otherParticipant = conversation.participants.find(\n    (p) => p.id !== currentUser?.id\n  );\n\n  const displayName = isGroup\n    ? conversation.name\n    : otherParticipant?.name || \"Unknown\";\n  const displayAvatar = isGroup\n    ? conversation.avatar\n    : otherParticipant?.avatar;\n  const status = !isGroup ? otherParticipant?.status : undefined;\n\n  const statusColors = {\n    online: \"bg-green-500\",\n    away: \"bg-yellow-500\",\n    busy: \"bg-red-500\",\n    offline: \"bg-gray-400\",\n  };\n\n  return (\n    <div\n      className={cn(\n        \"flex items-center justify-between px-4 py-3 border-b bg-background\",\n        className\n      )}\n    >\n      {/* Left: Avatar and info */}\n      <div className=\"flex items-center gap-3\">\n        <div className=\"relative\">\n          <Avatar className=\"size-10\">\n            <AvatarImage src={displayAvatar} />\n            <AvatarFallback>\n              {isGroup ? (\n                <Users className=\"size-5\" />\n              ) : (\n                displayName?.slice(0, 2).toUpperCase()\n              )}\n            </AvatarFallback>\n          </Avatar>\n          {status && (\n            <span\n              className={cn(\n                \"absolute bottom-0 right-0 size-3 rounded-full border-2 border-background\",\n                statusColors[status]\n              )}\n            />\n          )}\n        </div>\n        <div>\n          <h3 className=\"font-medium\">{displayName}</h3>\n          <p className=\"text-xs text-muted-foreground\">\n            {isGroup\n              ? `${conversation.participants.length} members`\n              : status === \"online\"\n                ? \"Online\"\n                : status === \"away\"\n                  ? \"Away\"\n                  : status === \"busy\"\n                    ? \"Busy\"\n                    : otherParticipant?.lastSeen\n                      ? `Last seen ${otherParticipant.lastSeen}`\n                      : \"Offline\"}\n          </p>\n        </div>\n      </div>\n\n      {/* Right: Actions */}\n      <div className=\"flex items-center gap-1\">\n        <Button variant=\"ghost\" size=\"icon\" className=\"hidden sm:flex\">\n          <Phone className=\"size-5\" />\n          <span className=\"sr-only\">Voice call</span>\n        </Button>\n        <Button variant=\"ghost\" size=\"icon\" className=\"hidden sm:flex\">\n          <Video className=\"size-5\" />\n          <span className=\"sr-only\">Video call</span>\n        </Button>\n        <Button variant=\"ghost\" size=\"icon\">\n          <Search className=\"size-5\" />\n          <span className=\"sr-only\">Search</span>\n        </Button>\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"ghost\" size=\"icon\">\n              <MoreVertical className=\"size-5\" />\n              <span className=\"sr-only\">More options</span>\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\">\n            <DropdownMenuItem>\n              {conversation.isMuted ? (\n                <>\n                  <Bell className=\"size-4 mr-2\" />\n                  Unmute\n                </>\n              ) : (\n                <>\n                  <BellOff className=\"size-4 mr-2\" />\n                  Mute\n                </>\n              )}\n            </DropdownMenuItem>\n            <DropdownMenuItem>\n              <Pin className=\"size-4 mr-2\" />\n              {conversation.isPinned ? \"Unpin\" : \"Pin\"} conversation\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem className=\"text-destructive focus:text-destructive\">\n              <Trash2 className=\"size-4 mr-2\" />\n              Delete conversation\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/chat-01/components/conversation-header.tsx"
    },
    {
      "path": "src/registry/blocks/chat-01/components/message-bubble.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Check, CheckCheck, Copy, ThumbsUp, ThumbsDown, RotateCcw } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useState } from \"react\";\nimport type { ChatMessage } from \"../types/chat\";\n\ninterface MessageBubbleProps {\n  message: ChatMessage;\n  isOwn: boolean;\n}\n\nexport function MessageBubble({\n  message,\n  isOwn,\n}: MessageBubbleProps) {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = async () => {\n    await navigator.clipboard.writeText(message.content);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <div\n      className={cn(\n        \"group py-6 px-4 md:px-6\",\n        isOwn ? \"bg-transparent\" : \"bg-muted/40\"\n      )}\n    >\n      <div className=\"max-w-3xl mx-auto flex gap-4\">\n        {/* Avatar */}\n        <div className=\"shrink-0\">\n          {isOwn ? (\n            <Avatar className=\"size-8 border\">\n              <AvatarImage src={message.sender.avatar} />\n              <AvatarFallback className=\"text-xs bg-primary text-primary-foreground\">\n                {message.sender.name.slice(0, 2).toUpperCase()}\n              </AvatarFallback>\n            </Avatar>\n          ) : (\n            <Avatar className=\"size-8 border bg-background\">\n              <AvatarImage src={message.sender.avatar} />\n              <AvatarFallback className=\"text-xs\">\n                <svg\n                  viewBox=\"0 0 24 24\"\n                  className=\"size-5\"\n                  fill=\"currentColor\"\n                >\n                  <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\" />\n                </svg>\n              </AvatarFallback>\n            </Avatar>\n          )}\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 space-y-2 overflow-hidden\">\n          {/* Sender name */}\n          <p className=\"text-sm font-semibold\">\n            {isOwn ? \"You\" : message.sender.name}\n          </p>\n\n          {/* Message content */}\n          <div className=\"prose prose-sm dark:prose-invert max-w-none\">\n            <p className=\"whitespace-pre-wrap break-words leading-relaxed\">\n              {message.content}\n            </p>\n          </div>\n\n          {/* Attachments */}\n          {message.attachments && message.attachments.length > 0 && (\n            <div className=\"flex flex-wrap gap-2 mt-3\">\n              {message.attachments.map((attachment) => (\n                <div\n                  key={attachment.id}\n                  className=\"rounded-xl overflow-hidden border\"\n                >\n                  {attachment.type === \"image\" ? (\n                    <img\n                      src={attachment.url}\n                      alt={attachment.name}\n                      className=\"max-w-xs max-h-64 object-cover\"\n                    />\n                  ) : (\n                    <div className=\"flex items-center gap-2 px-3 py-2 bg-muted\">\n                      <span className=\"text-sm\">{attachment.name}</span>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Actions - only for assistant messages */}\n          {!isOwn && (\n            <div className=\"flex items-center gap-1 pt-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-8\"\n                onClick={handleCopy}\n                aria-label={copied ? \"Copied\" : \"Copy message\"}\n              >\n                {copied ? (\n                  <Check className=\"size-4 text-green-500\" />\n                ) : (\n                  <Copy className=\"size-4\" />\n                )}\n              </Button>\n              <Button variant=\"ghost\" size=\"icon\" className=\"size-8\" aria-label=\"Like\">\n                <ThumbsUp className=\"size-4\" />\n              </Button>\n              <Button variant=\"ghost\" size=\"icon\" className=\"size-8\" aria-label=\"Dislike\">\n                <ThumbsDown className=\"size-4\" />\n              </Button>\n              <Button variant=\"ghost\" size=\"icon\" className=\"size-8\" aria-label=\"Regenerate\">\n                <RotateCcw className=\"size-4\" />\n              </Button>\n            </div>\n          )}\n\n          {/* Status for own messages */}\n          {isOwn && message.status && (\n            <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n              {message.status === \"read\" ? (\n                <CheckCheck className=\"size-3.5 text-blue-500\" />\n              ) : message.status === \"delivered\" ? (\n                <CheckCheck className=\"size-3.5\" />\n              ) : (\n                <Check className=\"size-3.5\" />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/chat-01/components/message-bubble.tsx"
    },
    {
      "path": "src/registry/blocks/chat-01/components/chat-input.tsx",
      "content": "\"use client\";\n\nimport { useState, useRef, useCallback, useEffect } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { Paperclip, ArrowUp, X, FileIcon, Globe, Sparkles } from \"lucide-react\";\n\ninterface ChatInputProps {\n  onSend: (content: string, attachments?: File[]) => void;\n  onTyping?: () => void;\n  disabled?: boolean;\n  placeholder?: string;\n}\n\nexport function ChatInput({\n  onSend,\n  onTyping,\n  disabled,\n  placeholder = \"Message Assistant...\",\n}: ChatInputProps) {\n  const [message, setMessage] = useState(\"\");\n  const [attachments, setAttachments] = useState<File[]>([]);\n  const [previewUrls, setPreviewUrls] = useState<Map<number, string>>(new Map());\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Cleanup blob URLs on unmount\n  useEffect(() => {\n    return () => {\n      previewUrls.forEach((url) => URL.revokeObjectURL(url));\n    };\n  }, [previewUrls]);\n\n  const handleSend = useCallback(() => {\n    const trimmedMessage = message.trim();\n    if (!trimmedMessage && attachments.length === 0) return;\n\n    onSend(trimmedMessage, attachments.length > 0 ? attachments : undefined);\n    setMessage(\"\");\n    setAttachments([]);\n\n    // Reset textarea height\n    if (textareaRef.current) {\n      textareaRef.current.style.height = \"auto\";\n    }\n\n    // Focus back on textarea\n    textareaRef.current?.focus();\n  }, [message, attachments, onSend]);\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const handleTextareaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setMessage(e.target.value);\n    onTyping?.();\n\n    // Auto-resize textarea\n    const textarea = e.target;\n    textarea.style.height = \"auto\";\n    textarea.style.height = `${Math.min(textarea.scrollHeight, 200)}px`;\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    setAttachments((prev) => [...prev, ...files]);\n    e.target.value = \"\"; // Reset input\n  };\n\n  const removeAttachment = (index: number) => {\n    // Revoke the blob URL to prevent memory leak\n    const urlToRevoke = previewUrls.get(index);\n    if (urlToRevoke) {\n      URL.revokeObjectURL(urlToRevoke);\n      setPreviewUrls((prev) => {\n        const next = new Map(prev);\n        next.delete(index);\n        return next;\n      });\n    }\n    setAttachments((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  const getFilePreview = (file: File, index: number) => {\n    if (file.type.startsWith(\"image/\")) {\n      // Check if we already have a URL for this index\n      if (previewUrls.has(index)) {\n        return previewUrls.get(index);\n      }\n      const url = URL.createObjectURL(file);\n      setPreviewUrls((prev) => new Map(prev).set(index, url));\n      return url;\n    }\n    return null;\n  };\n\n  const hasContent = message.trim() || attachments.length > 0;\n\n  return (\n    <div className=\"p-4\">\n      {/* Attachments preview */}\n      {attachments.length > 0 && (\n        <div className=\"flex flex-wrap gap-2 mb-3\">\n          {attachments.map((file, index) => {\n            const imagePreview = getFilePreview(file, index);\n            return (\n              <div\n                key={index}\n                className=\"relative group rounded-lg border bg-muted overflow-hidden\"\n              >\n                {imagePreview ? (\n                  <img\n                    src={imagePreview}\n                    alt={file.name}\n                    className=\"size-16 object-cover\"\n                  />\n                ) : (\n                  <div className=\"size-16 flex flex-col items-center justify-center p-2\">\n                    <FileIcon className=\"size-6 text-muted-foreground\" />\n                    <span className=\"text-[10px] text-muted-foreground truncate max-w-full\">\n                      {file.name.split(\".\").pop()?.toUpperCase()}\n                    </span>\n                  </div>\n                )}\n                <button\n                  onClick={() => removeAttachment(index)}\n                  className=\"absolute -top-1 -right-1 size-5 rounded-full bg-destructive text-destructive-foreground flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\"\n                >\n                  <X className=\"size-3\" />\n                </button>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Main input container - ChatGPT style */}\n      <div className=\"relative rounded-2xl border bg-muted/50 shadow-sm\">\n        {/* Textarea */}\n        <Textarea\n          ref={textareaRef}\n          placeholder={placeholder}\n          value={message}\n          onChange={handleTextareaChange}\n          onKeyDown={handleKeyDown}\n          disabled={disabled}\n          className=\"min-h-[52px] max-h-[200px] resize-none border-0 bg-transparent px-4 py-3.5 pr-24 focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-muted-foreground/70\"\n          rows={1}\n        />\n\n        {/* Bottom action bar */}\n        <TooltipProvider>\n          <div className=\"flex items-center justify-between px-3 pb-3\">\n            {/* Left actions */}\n            <div className=\"flex items-center gap-1\">\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8 rounded-lg\"\n                    onClick={() => fileInputRef.current?.click()}\n                    disabled={disabled}\n                    aria-label=\"Attach file\"\n                  >\n                    <Paperclip className=\"size-4\" />\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>Attach file</TooltipContent>\n              </Tooltip>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                multiple\n                className=\"hidden\"\n                onChange={handleFileSelect}\n                aria-label=\"Upload files\"\n              />\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8 rounded-lg\"\n                    disabled={disabled}\n                    aria-label=\"Search the web\"\n                  >\n                    <Globe className=\"size-4\" />\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>Search the web</TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8 rounded-lg\"\n                    disabled={disabled}\n                    aria-label=\"Use tools\"\n                  >\n                    <Sparkles className=\"size-4\" />\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>Use tools</TooltipContent>\n              </Tooltip>\n            </div>\n\n            {/* Send button */}\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button\n                  size=\"icon\"\n                  className={cn(\n                    \"size-8 rounded-lg transition-all\",\n                    hasContent\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"bg-muted-foreground/20 text-muted-foreground cursor-not-allowed\"\n                  )}\n                  onClick={handleSend}\n                  disabled={disabled || !hasContent}\n                  aria-label=\"Send message\"\n                >\n                  <ArrowUp className=\"size-4\" />\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>Send message</TooltipContent>\n            </Tooltip>\n          </div>\n        </TooltipProvider>\n      </div>\n\n      {/* Disclaimer text */}\n      <p className=\"text-[11px] text-muted-foreground text-center mt-2\">\n        Assistant can make mistakes. Consider checking important information.\n      </p>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/chat-01/components/chat-input.tsx"
    },
    {
      "path": "src/registry/blocks/chat-01/components/typing-indicator.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport type { ChatUser } from \"../types/chat\";\n\ninterface TypingIndicatorProps {\n  users: ChatUser[];\n  className?: string;\n}\n\nexport function TypingIndicator({ users, className }: TypingIndicatorProps) {\n  if (users.length === 0) return null;\n\n  const displayText =\n    users.length === 1\n      ? `${users[0].name} is typing`\n      : users.length === 2\n        ? `${users[0].name} and ${users[1].name} are typing`\n        : `${users[0].name} and ${users.length - 1} others are typing`;\n\n  return (\n    <div className={cn(\"flex items-center gap-2 px-4 py-2\", className)}>\n      <div className=\"flex -space-x-2\">\n        {users.slice(0, 3).map((user) => (\n          <Avatar key={user.id} className=\"size-6 border-2 border-background\">\n            <AvatarImage src={user.avatar} />\n            <AvatarFallback className=\"text-[10px]\">\n              {user.name.slice(0, 2).toUpperCase()}\n            </AvatarFallback>\n          </Avatar>\n        ))}\n      </div>\n      <div className=\"flex items-center gap-1.5\">\n        <span className=\"text-sm text-muted-foreground\">{displayText}</span>\n        <div className=\"flex gap-0.5\">\n          <span className=\"size-1.5 rounded-full bg-muted-foreground animate-bounce [animation-delay:0ms]\" />\n          <span className=\"size-1.5 rounded-full bg-muted-foreground animate-bounce [animation-delay:150ms]\" />\n          <span className=\"size-1.5 rounded-full bg-muted-foreground animate-bounce [animation-delay:300ms]\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/chat-01/components/typing-indicator.tsx"
    }
  ],
  "meta": {
    "image": "/r/previews/chat-01.webp",
    "stacks": [
      "supabase"
    ]
  },
  "categories": [
    "chat"
  ],
  "type": "registry:block"
}