{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "team-management-01",
  "title": "Team Management 01",
  "description": "Team member management with invitations, role management, and member list",
  "dependencies": [
    "lucide-react",
    "date-fns"
  ],
  "registryDependencies": [
    "button",
    "card",
    "avatar",
    "badge",
    "input",
    "label",
    "dialog",
    "dropdown-menu",
    "select"
  ],
  "files": [
    {
      "path": "src/registry/blocks/team-management-01/team-management.tsx",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { UserPlus, Users, Search } from \"lucide-react\";\nimport {\n  MemberList,\n  InviteList,\n  InviteMemberDialog,\n} from \"./components\";\nimport type {\n  Team,\n  TeamMember,\n  TeamInvite,\n  TeamRole,\n  TeamManagementProps,\n} from \"./types/team\";\n\n// =============================================================================\n// Demo Data\n// =============================================================================\n\nconst demoTeam: Team = {\n  id: \"team_1\",\n  name: \"Acme Inc\",\n  slug: \"acme-inc\",\n  maxMembers: 10,\n  members: [\n    {\n      id: \"user_1\",\n      name: \"John Doe\",\n      email: \"john@acme.com\",\n      avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=john\",\n      role: \"owner\",\n      joinedAt: \"2024-01-15T10:00:00Z\",\n      status: \"active\",\n    },\n    {\n      id: \"user_2\",\n      name: \"Jane Smith\",\n      email: \"jane@acme.com\",\n      avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=jane\",\n      role: \"admin\",\n      joinedAt: \"2024-02-20T14:30:00Z\",\n      status: \"active\",\n    },\n    {\n      id: \"user_3\",\n      name: \"Bob Wilson\",\n      email: \"bob@acme.com\",\n      avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=bob\",\n      role: \"member\",\n      joinedAt: \"2024-03-10T09:15:00Z\",\n      status: \"active\",\n    },\n    {\n      id: \"user_4\",\n      name: \"Alice Brown\",\n      email: \"alice@acme.com\",\n      avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=alice\",\n      role: \"member\",\n      joinedAt: \"2024-04-05T16:45:00Z\",\n      status: \"active\",\n    },\n    {\n      id: \"user_5\",\n      name: \"Charlie Davis\",\n      email: \"charlie@acme.com\",\n      avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=charlie\",\n      role: \"viewer\",\n      joinedAt: \"2024-05-12T11:20:00Z\",\n      status: \"active\",\n    },\n  ],\n  invites: [\n    {\n      id: \"invite_1\",\n      email: \"newuser@example.com\",\n      role: \"member\",\n      status: \"pending\",\n      invitedBy: { id: \"user_1\", name: \"John Doe\" },\n      createdAt: new Date().toISOString(),\n      expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n    {\n      id: \"invite_2\",\n      email: \"developer@company.com\",\n      role: \"admin\",\n      status: \"pending\",\n      invitedBy: { id: \"user_1\", name: \"John Doe\" },\n      createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),\n      expiresAt: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n  ],\n};\n\n// =============================================================================\n// Demo Actions (for preview mode)\n// =============================================================================\n\nasync function demoInvite(\n  setTeam: React.Dispatch<React.SetStateAction<Team>>,\n  email: string,\n  role: TeamRole\n): Promise<void> {\n  await new Promise((resolve) => setTimeout(resolve, 500));\n\n  const newInvite: TeamInvite = {\n    id: `invite_${Date.now()}`,\n    email,\n    role,\n    status: \"pending\",\n    invitedBy: { id: \"user_1\", name: \"John Doe\" },\n    createdAt: new Date().toISOString(),\n    expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n  };\n\n  setTeam((prev) => ({\n    ...prev,\n    invites: [...prev.invites, newInvite],\n  }));\n}\n\nasync function demoUpdateRole(\n  setTeam: React.Dispatch<React.SetStateAction<Team>>,\n  memberId: string,\n  role: TeamRole\n): Promise<void> {\n  await new Promise((resolve) => setTimeout(resolve, 300));\n\n  setTeam((prev) => ({\n    ...prev,\n    members: prev.members.map((m) =>\n      m.id === memberId ? { ...m, role } : m\n    ),\n  }));\n}\n\nasync function demoRemoveMember(\n  setTeam: React.Dispatch<React.SetStateAction<Team>>,\n  memberId: string\n): Promise<void> {\n  await new Promise((resolve) => setTimeout(resolve, 300));\n\n  setTeam((prev) => ({\n    ...prev,\n    members: prev.members.filter((m) => m.id !== memberId),\n  }));\n}\n\nasync function demoCancelInvite(\n  setTeam: React.Dispatch<React.SetStateAction<Team>>,\n  inviteId: string\n): Promise<void> {\n  await new Promise((resolve) => setTimeout(resolve, 300));\n\n  setTeam((prev) => ({\n    ...prev,\n    invites: prev.invites.filter((i) => i.id !== inviteId),\n  }));\n}\n\nasync function demoResendInvite(\n  setTeam: React.Dispatch<React.SetStateAction<Team>>,\n  inviteId: string\n): Promise<void> {\n  await new Promise((resolve) => setTimeout(resolve, 300));\n\n  setTeam((prev) => ({\n    ...prev,\n    invites: prev.invites.map((i) =>\n      i.id === inviteId\n        ? {\n            ...i,\n            createdAt: new Date().toISOString(),\n            expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n          }\n        : i\n    ),\n  }));\n}\n\n// =============================================================================\n// Team Management Component\n// =============================================================================\n\nexport default function TeamManagement({\n  team: externalTeam,\n  currentUserId = \"user_1\",\n  onInvite,\n  onUpdateRole,\n  onRemoveMember,\n  onCancelInvite,\n  onResendInvite,\n  isLoading,\n  className,\n}: TeamManagementProps) {\n  const [internalTeam, setInternalTeam] = useState<Team>(demoTeam);\n  const [inviteDialogOpen, setInviteDialogOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  // Use external team if provided, otherwise use internal state\n  const team = externalTeam ?? internalTeam;\n  const setTeam = externalTeam ? () => {} : setInternalTeam;\n\n  // Check if current user can manage team\n  const currentMember = team.members.find((m) => m.id === currentUserId);\n  const canManage =\n    currentMember?.role === \"owner\" || currentMember?.role === \"admin\";\n\n  // Filter members by search\n  const filteredMembers = team.members.filter(\n    (member) =>\n      member.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      member.email.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  // Handlers with fallback to demo actions\n  const handleInvite = async (email: string, role: TeamRole) => {\n    if (onInvite) {\n      await onInvite(email, role);\n    } else {\n      await demoInvite(setInternalTeam, email, role);\n    }\n  };\n\n  const handleUpdateRole = (memberId: string, role: TeamRole) => {\n    if (onUpdateRole) {\n      onUpdateRole(memberId, role);\n    } else {\n      demoUpdateRole(setInternalTeam, memberId, role);\n    }\n  };\n\n  const handleRemoveMember = (memberId: string) => {\n    if (onRemoveMember) {\n      onRemoveMember(memberId);\n    } else {\n      demoRemoveMember(setInternalTeam, memberId);\n    }\n  };\n\n  const handleCancelInvite = (inviteId: string) => {\n    if (onCancelInvite) {\n      onCancelInvite(inviteId);\n    } else {\n      demoCancelInvite(setInternalTeam, inviteId);\n    }\n  };\n\n  const handleResendInvite = (inviteId: string) => {\n    if (onResendInvite) {\n      onResendInvite(inviteId);\n    } else {\n      demoResendInvite(setInternalTeam, inviteId);\n    }\n  };\n\n  return (\n    <div className={cn(\"w-full max-w-4xl mx-auto\", className)}>\n      <Card>\n        <CardHeader className=\"space-y-1\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n            <div className=\"space-y-1\">\n              <CardTitle className=\"flex items-center gap-2\">\n                <Users className=\"size-5\" />\n                Team Members\n              </CardTitle>\n              <CardDescription>\n                {team.members.length} member{team.members.length !== 1 ? \"s\" : \"\"}\n                {team.maxMembers && ` of ${team.maxMembers} maximum`}\n              </CardDescription>\n            </div>\n            {canManage && (\n              <Button onClick={() => setInviteDialogOpen(true)}>\n                <UserPlus className=\"size-4 mr-2\" />\n                Invite Member\n              </Button>\n            )}\n          </div>\n        </CardHeader>\n\n        <CardContent className=\"space-y-6\">\n          {/* Search */}\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Search members...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10\"\n            />\n          </div>\n\n          {/* Pending Invites */}\n          {canManage && team.invites.length > 0 && (\n            <InviteList\n              invites={team.invites}\n              onCancel={handleCancelInvite}\n              onResend={handleResendInvite}\n            />\n          )}\n\n          {/* Members List */}\n          {filteredMembers.length > 0 ? (\n            <MemberList\n              members={filteredMembers}\n              currentUserId={currentUserId}\n              canManage={canManage}\n              onUpdateRole={handleUpdateRole}\n              onRemove={handleRemoveMember}\n            />\n          ) : (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              No members found matching &quot;{searchQuery}&quot;\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Invite Dialog */}\n      <InviteMemberDialog\n        open={inviteDialogOpen}\n        onOpenChange={setInviteDialogOpen}\n        onInvite={handleInvite}\n      />\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/team-management-01/team-management.tsx"
    },
    {
      "path": "src/registry/blocks/team-management-01/types/team.ts",
      "content": "// =============================================================================\n// Team Management Types\n// =============================================================================\n\nexport type TeamRole = \"owner\" | \"admin\" | \"member\" | \"viewer\";\n\nexport type InviteStatus = \"pending\" | \"accepted\" | \"expired\" | \"declined\";\n\nexport interface TeamMember {\n  id: string;\n  name: string;\n  email: string;\n  avatar?: string;\n  role: TeamRole;\n  joinedAt: string;\n  status?: \"active\" | \"inactive\";\n}\n\nexport interface TeamInvite {\n  id: string;\n  email: string;\n  role: TeamRole;\n  status: InviteStatus;\n  invitedBy: {\n    id: string;\n    name: string;\n  };\n  createdAt: string;\n  expiresAt: string;\n}\n\nexport interface Team {\n  id: string;\n  name: string;\n  slug: string;\n  members: TeamMember[];\n  invites: TeamInvite[];\n  maxMembers?: number;\n}\n\nexport interface TeamManagementProps {\n  team?: Team;\n  currentUserId?: string;\n  onInvite?: (email: string, role: TeamRole) => Promise<void>;\n  onUpdateRole?: (memberId: string, role: TeamRole) => Promise<void>;\n  onRemoveMember?: (memberId: string) => Promise<void>;\n  onCancelInvite?: (inviteId: string) => Promise<void>;\n  onResendInvite?: (inviteId: string) => Promise<void>;\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport interface InviteMemberDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onInvite: (email: string, role: TeamRole) => Promise<void>;\n}\n\nexport interface MemberRowProps {\n  member: TeamMember;\n  currentUserId?: string;\n  onUpdateRole?: (memberId: string, role: TeamRole) => void;\n  onRemove?: (memberId: string) => void;\n}\n",
      "type": "registry:component",
      "target": "components/team-management-01/types/team.ts"
    },
    {
      "path": "src/registry/blocks/team-management-01/components/index.ts",
      "content": "// Components\nexport { MemberList } from \"./member-list\";\nexport { MemberRow } from \"./member-row\";\nexport { InviteList } from \"./invite-list\";\nexport { InviteMemberDialog } from \"./invite-member-dialog\";\nexport { RoleSelect } from \"./role-select\";\n\n// Re-export types\nexport type {\n  TeamRole,\n  InviteStatus,\n  TeamMember,\n  TeamInvite,\n  Team,\n  TeamManagementProps,\n  InviteMemberDialogProps,\n  MemberRowProps,\n} from \"../types/team\";\n",
      "type": "registry:component",
      "target": "components/team-management-01/components/index.ts"
    },
    {
      "path": "src/registry/blocks/team-management-01/components/role-select.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Crown, Shield, User, Eye } from \"lucide-react\";\nimport type { TeamRole } from \"../types/team\";\n\ninterface RoleSelectProps {\n  value: TeamRole;\n  onValueChange: (value: TeamRole) => void;\n  disabled?: boolean;\n  disabledRoles?: TeamRole[];\n  className?: string;\n}\n\nconst roleConfig: Record<TeamRole, { label: string; icon: typeof Crown; description: string }> = {\n  owner: {\n    label: \"Owner\",\n    icon: Crown,\n    description: \"Full access, can delete team\",\n  },\n  admin: {\n    label: \"Admin\",\n    icon: Shield,\n    description: \"Manage members and settings\",\n  },\n  member: {\n    label: \"Member\",\n    icon: User,\n    description: \"Can create and edit\",\n  },\n  viewer: {\n    label: \"Viewer\",\n    icon: Eye,\n    description: \"Read-only access\",\n  },\n};\n\nexport function RoleSelect({\n  value,\n  onValueChange,\n  disabled,\n  disabledRoles = [\"owner\"],\n  className,\n}: RoleSelectProps) {\n  return (\n    <Select value={value} onValueChange={onValueChange} disabled={disabled}>\n      <SelectTrigger className={cn(\"w-[130px]\", className)}>\n        <SelectValue />\n      </SelectTrigger>\n      <SelectContent>\n        {(Object.keys(roleConfig) as TeamRole[]).map((role) => {\n          const config = roleConfig[role];\n          const Icon = config.icon;\n          const isDisabled = disabledRoles.includes(role);\n          return (\n            <SelectItem key={role} value={role} disabled={isDisabled}>\n              <div className=\"flex items-center gap-2\">\n                <Icon className=\"size-4\" />\n                <span>{config.label}</span>\n              </div>\n            </SelectItem>\n          );\n        })}\n      </SelectContent>\n    </Select>\n  );\n}\n\nexport function RoleBadge({ role }: { role: TeamRole }) {\n  const config = roleConfig[role];\n  const Icon = config.icon;\n\n  const variants: Record<TeamRole, \"default\" | \"secondary\" | \"outline\"> = {\n    owner: \"default\",\n    admin: \"secondary\",\n    member: \"outline\",\n    viewer: \"outline\",\n  };\n\n  return (\n    <Badge variant={variants[role]} className=\"gap-1\">\n      <Icon className=\"size-3\" />\n      {config.label}\n    </Badge>\n  );\n}\n\nexport { roleConfig };\n",
      "type": "registry:component",
      "target": "components/team-management-01/components/role-select.tsx"
    },
    {
      "path": "src/registry/blocks/team-management-01/components/member-row.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { RoleSelect, RoleBadge } from \"./role-select\";\nimport { MoreHorizontal, UserMinus, LogOut } from \"lucide-react\";\nimport type { TeamMember, TeamRole } from \"../types/team\";\nimport { formatDistanceToNow } from \"date-fns\";\n\ninterface MemberRowProps {\n  member: TeamMember;\n  currentUserId?: string;\n  canManage?: boolean;\n  onUpdateRole?: (memberId: string, role: TeamRole) => void;\n  onRemove?: (memberId: string) => void;\n  className?: string;\n}\n\nexport function MemberRow({\n  member,\n  currentUserId,\n  canManage = false,\n  onUpdateRole,\n  onRemove,\n  className,\n}: MemberRowProps) {\n  const isCurrentUser = member.id === currentUserId;\n  const isOwner = member.role === \"owner\";\n\n  const formatJoinDate = (dateString: string) => {\n    try {\n      return formatDistanceToNow(new Date(dateString), { addSuffix: true });\n    } catch {\n      return dateString;\n    }\n  };\n\n  return (\n    <div\n      className={cn(\n        \"flex items-center justify-between py-3 px-4 hover:bg-muted/50 rounded-lg transition-colors\",\n        className\n      )}\n    >\n      <div className=\"flex items-center gap-3\">\n        <Avatar className=\"size-10\">\n          <AvatarImage src={member.avatar} />\n          <AvatarFallback>\n            {member.name.slice(0, 2).toUpperCase()}\n          </AvatarFallback>\n        </Avatar>\n        <div>\n          <div className=\"flex items-center gap-2\">\n            <p className=\"text-sm font-medium\">\n              {member.name}\n              {isCurrentUser && (\n                <span className=\"text-muted-foreground ml-1\">(you)</span>\n              )}\n            </p>\n          </div>\n          <p className=\"text-xs text-muted-foreground\">{member.email}</p>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-3\">\n        <p className=\"text-xs text-muted-foreground hidden sm:block\">\n          Joined {formatJoinDate(member.joinedAt)}\n        </p>\n\n        {canManage && !isOwner ? (\n          <RoleSelect\n            value={member.role}\n            onValueChange={(role) => onUpdateRole?.(member.id, role)}\n            disabledRoles={[\"owner\"]}\n          />\n        ) : (\n          <RoleBadge role={member.role} />\n        )}\n\n        {(canManage || isCurrentUser) && !isOwner && (\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" className=\"size-8\">\n                <MoreHorizontal className=\"size-4\" />\n                <span className=\"sr-only\">Actions</span>\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              {isCurrentUser ? (\n                <DropdownMenuItem\n                  onClick={() => onRemove?.(member.id)}\n                  className=\"text-destructive focus:text-destructive\"\n                >\n                  <LogOut className=\"size-4 mr-2\" />\n                  Leave team\n                </DropdownMenuItem>\n              ) : (\n                canManage && (\n                  <DropdownMenuItem\n                    onClick={() => onRemove?.(member.id)}\n                    className=\"text-destructive focus:text-destructive\"\n                  >\n                    <UserMinus className=\"size-4 mr-2\" />\n                    Remove member\n                  </DropdownMenuItem>\n                )\n              )}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        )}\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/team-management-01/components/member-row.tsx"
    },
    {
      "path": "src/registry/blocks/team-management-01/components/member-list.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { MemberRow } from \"./member-row\";\nimport type { TeamMember, TeamRole } from \"../types/team\";\n\ninterface MemberListProps {\n  members: TeamMember[];\n  currentUserId?: string;\n  canManage?: boolean;\n  onUpdateRole?: (memberId: string, role: TeamRole) => void;\n  onRemove?: (memberId: string) => void;\n  className?: string;\n}\n\nexport function MemberList({\n  members,\n  currentUserId,\n  canManage,\n  onUpdateRole,\n  onRemove,\n  className,\n}: MemberListProps) {\n  // Sort members: owners first, then admins, then by name\n  const sortedMembers = [...members].sort((a, b) => {\n    const roleOrder: Record<TeamRole, number> = {\n      owner: 0,\n      admin: 1,\n      member: 2,\n      viewer: 3,\n    };\n    const roleDiff = roleOrder[a.role] - roleOrder[b.role];\n    if (roleDiff !== 0) return roleDiff;\n    return a.name.localeCompare(b.name);\n  });\n\n  return (\n    <div className={cn(\"divide-y\", className)}>\n      {sortedMembers.map((member) => (\n        <MemberRow\n          key={member.id}\n          member={member}\n          currentUserId={currentUserId}\n          canManage={canManage}\n          onUpdateRole={onUpdateRole}\n          onRemove={onRemove}\n        />\n      ))}\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/team-management-01/components/member-list.tsx"
    },
    {
      "path": "src/registry/blocks/team-management-01/components/invite-list.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { RoleBadge } from \"./role-select\";\nimport { Mail, X, RefreshCw, Clock } from \"lucide-react\";\nimport type { TeamInvite } from \"../types/team\";\nimport { formatDistanceToNow } from \"date-fns\";\n\ninterface InviteListProps {\n  invites: TeamInvite[];\n  onCancel?: (inviteId: string) => void;\n  onResend?: (inviteId: string) => void;\n  className?: string;\n}\n\nexport function InviteList({\n  invites,\n  onCancel,\n  onResend,\n  className,\n}: InviteListProps) {\n  const pendingInvites = invites.filter((i) => i.status === \"pending\");\n\n  if (pendingInvites.length === 0) {\n    return null;\n  }\n\n  const formatExpiry = (dateString: string) => {\n    try {\n      const date = new Date(dateString);\n      if (date < new Date()) {\n        return \"Expired\";\n      }\n      return `Expires ${formatDistanceToNow(date, { addSuffix: true })}`;\n    } catch {\n      return dateString;\n    }\n  };\n\n  return (\n    <div className={cn(\"space-y-2\", className)}>\n      <h4 className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n        <Mail className=\"size-4\" />\n        Pending Invitations ({pendingInvites.length})\n      </h4>\n      <div className=\"divide-y rounded-lg border\">\n        {pendingInvites.map((invite) => (\n          <div\n            key={invite.id}\n            className=\"flex items-center justify-between py-3 px-4\"\n          >\n            <div className=\"flex items-center gap-3\">\n              <div className=\"size-10 rounded-full bg-muted flex items-center justify-center\">\n                <Mail className=\"size-5 text-muted-foreground\" />\n              </div>\n              <div>\n                <p className=\"text-sm font-medium\">{invite.email}</p>\n                <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                  <Clock className=\"size-3\" />\n                  {formatExpiry(invite.expiresAt)}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <RoleBadge role={invite.role} />\n              <div className=\"flex items-center gap-1\">\n                {onResend && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => onResend(invite.id)}\n                  >\n                    <RefreshCw className=\"size-4\" />\n                    <span className=\"sr-only\">Resend invite</span>\n                  </Button>\n                )}\n                {onCancel && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8 text-destructive hover:text-destructive\"\n                    onClick={() => onCancel(invite.id)}\n                  >\n                    <X className=\"size-4\" />\n                    <span className=\"sr-only\">Cancel invite</span>\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/team-management-01/components/invite-list.tsx"
    },
    {
      "path": "src/registry/blocks/team-management-01/components/invite-member-dialog.tsx",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { RoleSelect, roleConfig } from \"./role-select\";\nimport { Loader2, UserPlus } from \"lucide-react\";\nimport type { TeamRole } from \"../types/team\";\n\ninterface InviteMemberDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onInvite: (email: string, role: TeamRole) => Promise<void>;\n}\n\nexport function InviteMemberDialog({\n  open,\n  onOpenChange,\n  onInvite,\n}: InviteMemberDialogProps) {\n  const [email, setEmail] = useState(\"\");\n  const [role, setRole] = useState<TeamRole>(\"member\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    if (!email.trim()) {\n      setError(\"Email is required\");\n      return;\n    }\n\n    if (!email.includes(\"@\")) {\n      setError(\"Please enter a valid email address\");\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      await onInvite(email, role);\n      setEmail(\"\");\n      setRole(\"member\");\n      onOpenChange(false);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to send invite\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Invite Team Member</DialogTitle>\n          <DialogDescription>\n            Send an invitation email to add a new member to your team.\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Email address</Label>\n            <Input\n              id=\"email\"\n              type=\"email\"\n              placeholder=\"colleague@company.com\"\n              value={email}\n              onChange={(e) => {\n                setEmail(e.target.value);\n                setError(null);\n              }}\n              className={cn(error && \"border-destructive\")}\n            />\n            {error && <p className=\"text-xs text-destructive\">{error}</p>}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>Role</Label>\n            <RoleSelect\n              value={role}\n              onValueChange={setRole}\n              disabledRoles={[\"owner\"]}\n              className=\"w-full\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              {roleConfig[role].description}\n            </p>\n          </div>\n\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading ? (\n                <Loader2 className=\"size-4 mr-2 animate-spin\" />\n              ) : (\n                <UserPlus className=\"size-4 mr-2\" />\n              )}\n              Send Invite\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/team-management-01/components/invite-member-dialog.tsx"
    },
    {
      "path": "src/registry/blocks/team-management-01/postgres/team-actions.ts",
      "content": "\"use server\";\n\n// =============================================================================\n// Team Management PostgreSQL Server Actions\n// =============================================================================\n// These are placeholder server actions. Replace with your actual database logic.\n// This file demonstrates the expected API structure for team management operations.\n\nimport type { Team, TeamMember, TeamInvite, TeamRole } from \"../types/team\";\n\n// -----------------------------------------------------------------------------\n// Types for Server Actions\n// -----------------------------------------------------------------------------\n\ninterface GetTeamParams {\n  teamId: string;\n  userId: string;\n}\n\ninterface InviteMemberParams {\n  teamId: string;\n  email: string;\n  role: TeamRole;\n  invitedByUserId: string;\n}\n\ninterface UpdateMemberRoleParams {\n  teamId: string;\n  memberId: string;\n  role: TeamRole;\n  updatedByUserId: string;\n}\n\ninterface RemoveMemberParams {\n  teamId: string;\n  memberId: string;\n  removedByUserId: string;\n}\n\ninterface CancelInviteParams {\n  teamId: string;\n  inviteId: string;\n  cancelledByUserId: string;\n}\n\ninterface ResendInviteParams {\n  teamId: string;\n  inviteId: string;\n  resentByUserId: string;\n}\n\n// -----------------------------------------------------------------------------\n// Server Actions\n// -----------------------------------------------------------------------------\n\nexport async function getTeam({\n  teamId,\n  userId,\n}: GetTeamParams): Promise<Team | null> {\n  // Example SQL query structure:\n  // const team = await db.query(`\n  //   SELECT t.*,\n  //          json_agg(DISTINCT tm.*) as members,\n  //          json_agg(DISTINCT ti.*) as invites\n  //   FROM teams t\n  //   LEFT JOIN team_members tm ON t.id = tm.team_id\n  //   LEFT JOIN team_invites ti ON t.id = ti.team_id\n  //   WHERE t.id = $1\n  //     AND EXISTS (\n  //       SELECT 1 FROM team_members\n  //       WHERE team_id = t.id AND user_id = $2\n  //     )\n  //   GROUP BY t.id\n  // `, [teamId, userId]);\n\n  console.log(\"getTeam called with:\", { teamId, userId });\n\n  // Return null as placeholder - implement with your database\n  return null;\n}\n\nexport async function inviteMember({\n  teamId,\n  email,\n  role,\n  invitedByUserId,\n}: InviteMemberParams): Promise<TeamInvite> {\n  // Example implementation:\n  // 1. Check if user has permission (owner/admin)\n  // 2. Check if email is already a member\n  // 3. Check if invite already exists\n  // 4. Create invite record\n  // 5. Send invitation email\n  //\n  // const invite = await db.query(`\n  //   INSERT INTO team_invites (team_id, email, role, invited_by, expires_at)\n  //   VALUES ($1, $2, $3, $4, NOW() + INTERVAL '7 days')\n  //   RETURNING *\n  // `, [teamId, email, role, invitedByUserId]);\n\n  console.log(\"inviteMember called with:\", { teamId, email, role, invitedByUserId });\n\n  // Return placeholder - implement with your database\n  return {\n    id: \"placeholder\",\n    email,\n    role,\n    status: \"pending\",\n    invitedBy: { id: invitedByUserId, name: \"Unknown\" },\n    createdAt: new Date().toISOString(),\n    expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n  };\n}\n\nexport async function updateMemberRole({\n  teamId,\n  memberId,\n  role,\n  updatedByUserId,\n}: UpdateMemberRoleParams): Promise<TeamMember> {\n  // Example implementation:\n  // 1. Verify updater has permission (owner/admin)\n  // 2. Prevent changing owner role\n  // 3. Update member role\n  //\n  // const member = await db.query(`\n  //   UPDATE team_members\n  //   SET role = $1, updated_at = NOW()\n  //   WHERE team_id = $2 AND user_id = $3\n  //   RETURNING *\n  // `, [role, teamId, memberId]);\n\n  console.log(\"updateMemberRole called with:\", { teamId, memberId, role, updatedByUserId });\n\n  // Return placeholder - implement with your database\n  return {\n    id: memberId,\n    name: \"Placeholder\",\n    email: \"placeholder@example.com\",\n    role,\n    joinedAt: new Date().toISOString(),\n  };\n}\n\nexport async function removeMember({\n  teamId,\n  memberId,\n  removedByUserId,\n}: RemoveMemberParams): Promise<void> {\n  // Example implementation:\n  // 1. Verify remover has permission (owner/admin) or is removing themselves\n  // 2. Prevent removing the owner\n  // 3. Remove member record\n  //\n  // await db.query(`\n  //   DELETE FROM team_members\n  //   WHERE team_id = $1 AND user_id = $2\n  // `, [teamId, memberId]);\n\n  console.log(\"removeMember called with:\", { teamId, memberId, removedByUserId });\n}\n\nexport async function cancelInvite({\n  teamId,\n  inviteId,\n  cancelledByUserId,\n}: CancelInviteParams): Promise<void> {\n  // Example implementation:\n  // 1. Verify canceller has permission (owner/admin)\n  // 2. Delete or mark invite as cancelled\n  //\n  // await db.query(`\n  //   UPDATE team_invites\n  //   SET status = 'cancelled', cancelled_at = NOW()\n  //   WHERE id = $1 AND team_id = $2\n  // `, [inviteId, teamId]);\n\n  console.log(\"cancelInvite called with:\", { teamId, inviteId, cancelledByUserId });\n}\n\nexport async function resendInvite({\n  teamId,\n  inviteId,\n  resentByUserId,\n}: ResendInviteParams): Promise<TeamInvite> {\n  // Example implementation:\n  // 1. Verify resender has permission (owner/admin)\n  // 2. Update invite expiry\n  // 3. Resend invitation email\n  //\n  // const invite = await db.query(`\n  //   UPDATE team_invites\n  //   SET expires_at = NOW() + INTERVAL '7 days', resent_at = NOW()\n  //   WHERE id = $1 AND team_id = $2\n  //   RETURNING *\n  // `, [inviteId, teamId]);\n\n  console.log(\"resendInvite called with:\", { teamId, inviteId, resentByUserId });\n\n  // Return placeholder - implement with your database\n  return {\n    id: inviteId,\n    email: \"placeholder@example.com\",\n    role: \"member\",\n    status: \"pending\",\n    invitedBy: { id: resentByUserId, name: \"Unknown\" },\n    createdAt: new Date().toISOString(),\n    expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n  };\n}\n\nexport async function acceptInvite(token: string): Promise<TeamMember> {\n  // Example implementation:\n  // 1. Validate invite token\n  // 2. Check invite hasn't expired\n  // 3. Create team member record\n  // 4. Mark invite as accepted\n  //\n  // const { invite } = await db.query(`\n  //   SELECT * FROM team_invites WHERE token = $1 AND status = 'pending'\n  // `, [token]);\n  //\n  // const member = await db.query(`\n  //   INSERT INTO team_members (team_id, user_id, role)\n  //   VALUES ($1, $2, $3)\n  //   RETURNING *\n  // `, [invite.team_id, currentUserId, invite.role]);\n\n  console.log(\"acceptInvite called with token:\", token);\n\n  // Return placeholder - implement with your database\n  return {\n    id: \"placeholder\",\n    name: \"New Member\",\n    email: \"new@example.com\",\n    role: \"member\",\n    joinedAt: new Date().toISOString(),\n  };\n}\n",
      "type": "registry:component",
      "target": "components/team-management-01/postgres/team-actions.ts"
    },
    {
      "path": "src/registry/blocks/team-management-01/supabase/team-actions.ts",
      "content": "\"use server\";\n\n// =============================================================================\n// Team Management Supabase Server Actions\n// =============================================================================\n// These are placeholder server actions. Replace with your actual Supabase logic.\n// This file demonstrates the expected API structure for team management operations.\n\nimport type { Team, TeamMember, TeamInvite, TeamRole } from \"../types/team\";\n\n// Uncomment and configure your Supabase client:\n// import { createClient } from \"@/lib/supabase/server\";\n\n// -----------------------------------------------------------------------------\n// Types for Server Actions\n// -----------------------------------------------------------------------------\n\ninterface GetTeamParams {\n  teamId: string;\n}\n\ninterface InviteMemberParams {\n  teamId: string;\n  email: string;\n  role: TeamRole;\n}\n\ninterface UpdateMemberRoleParams {\n  teamId: string;\n  memberId: string;\n  role: TeamRole;\n}\n\ninterface RemoveMemberParams {\n  teamId: string;\n  memberId: string;\n}\n\ninterface CancelInviteParams {\n  teamId: string;\n  inviteId: string;\n}\n\ninterface ResendInviteParams {\n  teamId: string;\n  inviteId: string;\n}\n\n// -----------------------------------------------------------------------------\n// Server Actions\n// -----------------------------------------------------------------------------\n\nexport async function getTeam({ teamId }: GetTeamParams): Promise<Team | null> {\n  // const supabase = await createClient();\n  //\n  // const { data: { user } } = await supabase.auth.getUser();\n  // if (!user) return null;\n  //\n  // // Get team with members and invites\n  // const { data: team, error } = await supabase\n  //   .from(\"teams\")\n  //   .select(`\n  //     *,\n  //     members:team_members(\n  //       id,\n  //       role,\n  //       joined_at,\n  //       user:users(id, name, email, avatar_url)\n  //     ),\n  //     invites:team_invites(*)\n  //   `)\n  //   .eq(\"id\", teamId)\n  //   .single();\n  //\n  // if (error || !team) return null;\n  //\n  // // Check if current user is a member\n  // const isMember = team.members.some((m: any) => m.user.id === user.id);\n  // if (!isMember) return null;\n  //\n  // return {\n  //   id: team.id,\n  //   name: team.name,\n  //   slug: team.slug,\n  //   maxMembers: team.max_members,\n  //   members: team.members.map((m: any) => ({\n  //     id: m.user.id,\n  //     name: m.user.name,\n  //     email: m.user.email,\n  //     avatar: m.user.avatar_url,\n  //     role: m.role,\n  //     joinedAt: m.joined_at,\n  //   })),\n  //   invites: team.invites,\n  // };\n\n  console.log(\"getTeam called with:\", { teamId });\n  return null;\n}\n\nexport async function inviteMember({\n  teamId,\n  email,\n  role,\n}: InviteMemberParams): Promise<TeamInvite> {\n  // const supabase = await createClient();\n  //\n  // const { data: { user } } = await supabase.auth.getUser();\n  // if (!user) throw new Error(\"Unauthorized\");\n  //\n  // // Check user has permission\n  // const { data: membership } = await supabase\n  //   .from(\"team_members\")\n  //   .select(\"role\")\n  //   .eq(\"team_id\", teamId)\n  //   .eq(\"user_id\", user.id)\n  //   .single();\n  //\n  // if (!membership || ![\"owner\", \"admin\"].includes(membership.role)) {\n  //   throw new Error(\"Insufficient permissions\");\n  // }\n  //\n  // // Check if already a member\n  // const { data: existingMember } = await supabase\n  //   .from(\"team_members\")\n  //   .select(\"id\")\n  //   .eq(\"team_id\", teamId)\n  //   .eq(\"email\", email)\n  //   .single();\n  //\n  // if (existingMember) {\n  //   throw new Error(\"User is already a member\");\n  // }\n  //\n  // // Create invite\n  // const { data: invite, error } = await supabase\n  //   .from(\"team_invites\")\n  //   .insert({\n  //     team_id: teamId,\n  //     email,\n  //     role,\n  //     invited_by: user.id,\n  //     expires_at: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n  //   })\n  //   .select()\n  //   .single();\n  //\n  // if (error) throw error;\n  //\n  // // TODO: Send invitation email using Supabase Edge Function or your email service\n  //\n  // return invite;\n\n  console.log(\"inviteMember called with:\", { teamId, email, role });\n\n  return {\n    id: \"placeholder\",\n    email,\n    role,\n    status: \"pending\",\n    invitedBy: { id: \"placeholder\", name: \"Unknown\" },\n    createdAt: new Date().toISOString(),\n    expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n  };\n}\n\nexport async function updateMemberRole({\n  teamId,\n  memberId,\n  role,\n}: UpdateMemberRoleParams): Promise<TeamMember> {\n  // const supabase = await createClient();\n  //\n  // const { data: { user } } = await supabase.auth.getUser();\n  // if (!user) throw new Error(\"Unauthorized\");\n  //\n  // // Check user has permission\n  // const { data: membership } = await supabase\n  //   .from(\"team_members\")\n  //   .select(\"role\")\n  //   .eq(\"team_id\", teamId)\n  //   .eq(\"user_id\", user.id)\n  //   .single();\n  //\n  // if (!membership || ![\"owner\", \"admin\"].includes(membership.role)) {\n  //   throw new Error(\"Insufficient permissions\");\n  // }\n  //\n  // // Prevent changing owner role\n  // const { data: targetMember } = await supabase\n  //   .from(\"team_members\")\n  //   .select(\"role\")\n  //   .eq(\"team_id\", teamId)\n  //   .eq(\"user_id\", memberId)\n  //   .single();\n  //\n  // if (targetMember?.role === \"owner\") {\n  //   throw new Error(\"Cannot change owner role\");\n  // }\n  //\n  // // Update role\n  // const { data: updated, error } = await supabase\n  //   .from(\"team_members\")\n  //   .update({ role })\n  //   .eq(\"team_id\", teamId)\n  //   .eq(\"user_id\", memberId)\n  //   .select(`*, user:users(*)`)\n  //   .single();\n  //\n  // if (error) throw error;\n  // return updated;\n\n  console.log(\"updateMemberRole called with:\", { teamId, memberId, role });\n\n  return {\n    id: memberId,\n    name: \"Placeholder\",\n    email: \"placeholder@example.com\",\n    role,\n    joinedAt: new Date().toISOString(),\n  };\n}\n\nexport async function removeMember({\n  teamId,\n  memberId,\n}: RemoveMemberParams): Promise<void> {\n  // const supabase = await createClient();\n  //\n  // const { data: { user } } = await supabase.auth.getUser();\n  // if (!user) throw new Error(\"Unauthorized\");\n  //\n  // // Check permission or if removing self\n  // const isRemovingSelf = user.id === memberId;\n  //\n  // if (!isRemovingSelf) {\n  //   const { data: membership } = await supabase\n  //     .from(\"team_members\")\n  //     .select(\"role\")\n  //     .eq(\"team_id\", teamId)\n  //     .eq(\"user_id\", user.id)\n  //     .single();\n  //\n  //   if (!membership || ![\"owner\", \"admin\"].includes(membership.role)) {\n  //     throw new Error(\"Insufficient permissions\");\n  //   }\n  // }\n  //\n  // // Prevent removing owner\n  // const { data: targetMember } = await supabase\n  //   .from(\"team_members\")\n  //   .select(\"role\")\n  //   .eq(\"team_id\", teamId)\n  //   .eq(\"user_id\", memberId)\n  //   .single();\n  //\n  // if (targetMember?.role === \"owner\") {\n  //   throw new Error(\"Cannot remove team owner\");\n  // }\n  //\n  // // Remove member\n  // const { error } = await supabase\n  //   .from(\"team_members\")\n  //   .delete()\n  //   .eq(\"team_id\", teamId)\n  //   .eq(\"user_id\", memberId);\n  //\n  // if (error) throw error;\n\n  console.log(\"removeMember called with:\", { teamId, memberId });\n}\n\nexport async function cancelInvite({\n  teamId,\n  inviteId,\n}: CancelInviteParams): Promise<void> {\n  // const supabase = await createClient();\n  //\n  // const { data: { user } } = await supabase.auth.getUser();\n  // if (!user) throw new Error(\"Unauthorized\");\n  //\n  // // Check permission\n  // const { data: membership } = await supabase\n  //   .from(\"team_members\")\n  //   .select(\"role\")\n  //   .eq(\"team_id\", teamId)\n  //   .eq(\"user_id\", user.id)\n  //   .single();\n  //\n  // if (!membership || ![\"owner\", \"admin\"].includes(membership.role)) {\n  //   throw new Error(\"Insufficient permissions\");\n  // }\n  //\n  // // Delete or update invite\n  // const { error } = await supabase\n  //   .from(\"team_invites\")\n  //   .delete()\n  //   .eq(\"id\", inviteId)\n  //   .eq(\"team_id\", teamId);\n  //\n  // if (error) throw error;\n\n  console.log(\"cancelInvite called with:\", { teamId, inviteId });\n}\n\nexport async function resendInvite({\n  teamId,\n  inviteId,\n}: ResendInviteParams): Promise<TeamInvite> {\n  // const supabase = await createClient();\n  //\n  // const { data: { user } } = await supabase.auth.getUser();\n  // if (!user) throw new Error(\"Unauthorized\");\n  //\n  // // Check permission\n  // const { data: membership } = await supabase\n  //   .from(\"team_members\")\n  //   .select(\"role\")\n  //   .eq(\"team_id\", teamId)\n  //   .eq(\"user_id\", user.id)\n  //   .single();\n  //\n  // if (!membership || ![\"owner\", \"admin\"].includes(membership.role)) {\n  //   throw new Error(\"Insufficient permissions\");\n  // }\n  //\n  // // Update expiry and resend\n  // const { data: invite, error } = await supabase\n  //   .from(\"team_invites\")\n  //   .update({\n  //     expires_at: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n  //     resent_at: new Date().toISOString(),\n  //   })\n  //   .eq(\"id\", inviteId)\n  //   .eq(\"team_id\", teamId)\n  //   .select()\n  //   .single();\n  //\n  // if (error) throw error;\n  //\n  // // TODO: Resend invitation email\n  //\n  // return invite;\n\n  console.log(\"resendInvite called with:\", { teamId, inviteId });\n\n  return {\n    id: inviteId,\n    email: \"placeholder@example.com\",\n    role: \"member\",\n    status: \"pending\",\n    invitedBy: { id: \"placeholder\", name: \"Unknown\" },\n    createdAt: new Date().toISOString(),\n    expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n  };\n}\n",
      "type": "registry:component",
      "target": "components/team-management-01/supabase/team-actions.ts"
    }
  ],
  "meta": {
    "image": "/r/previews/team-management-01.webp",
    "stacks": [
      "supabase",
      "postgres"
    ]
  },
  "categories": [
    "team-management"
  ],
  "type": "registry:block"
}