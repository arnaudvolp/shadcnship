{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "waitlist-01",
  "title": "Waitlist 01",
  "description": "A waitlist signup section with email form, social proof avatars, and countdown timer",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "input",
    "badge"
  ],
  "files": [
    {
      "path": "src/registry/blocks/waitlist-01/waitlist.tsx",
      "content": "\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { Calendar, CheckCircle2, Loader2, XCircle } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\n\nimport type { SubmitStatus, TimeLeft, Waitlist01Props } from \"./types\";\nimport { isValidEmail, submitToProvider } from \"./providers\";\n\n// ============================================================================\n// Helper Components\n// ============================================================================\n\nconst CountdownUnit = ({ value, label }: { value: number; label: string }) => (\n  <div className=\"flex flex-col items-center\">\n    <span className=\"text-xl font-semibold tabular-nums md:text-2xl\">\n      {value.toString().padStart(2, \"0\")}\n    </span>\n    <span className=\"text-xs uppercase tracking-wider text-muted-foreground\">\n      {label}\n    </span>\n  </div>\n);\n\nconst CountdownSeparator = () => (\n  <span className=\"text-2xl font-light text-muted-foreground/50\">:</span>\n);\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\nconst Waitlist01 = ({\n  badge = \"Available in early 2026\",\n  heading = \"Join the Waiting List\",\n  description = \"Be amongst the first to experience our product. Sign up to be notified when we launch!\",\n  inputPlaceholder = \"Enter your email\",\n  buttonText = \"Join waitlist\",\n  provider,\n  onSubmit,\n  successMessage = \"You're on the list! We'll notify you when we launch.\",\n  errorMessage = \"Something went wrong. Please try again.\",\n  socialProof = {\n    avatars: [\n      \"https://github.com/shadcn.png\",\n      \"https://github.com/shadcn.png\",\n      \"https://github.com/shadcn.png\",\n      \"https://github.com/shadcn.png\",\n    ],\n    text: \"Join 2,500+ others on the waitlist\",\n  },\n  countdown,\n  className,\n}: Waitlist01Props) => {\n  const [email, setEmail] = useState(\"\");\n  const [status, setStatus] = useState<SubmitStatus>(\"idle\");\n  const [message, setMessage] = useState(\"\");\n  const [timeLeft, setTimeLeft] = useState<TimeLeft>({\n    days: 0,\n    hours: 0,\n    minutes: 0,\n    seconds: 0,\n  });\n\n  // Default countdown: 30 days from now\n  const defaultTargetTime = useMemo(\n    () => Date.now() + 30 * 24 * 60 * 60 * 1000,\n    [],\n  );\n\n  const targetTimestamp = useMemo(() => {\n    if (!countdown?.targetDate) return defaultTargetTime;\n    return typeof countdown.targetDate === \"number\"\n      ? countdown.targetDate\n      : countdown.targetDate.getTime();\n  }, [countdown?.targetDate, defaultTargetTime]);\n\n  const countdownLabel = countdown?.label ?? \"Left until launch\";\n\n  // Countdown timer\n  useEffect(() => {\n    const calculateTimeLeft = () => {\n      const difference = targetTimestamp - Date.now();\n\n      if (difference > 0) {\n        setTimeLeft({\n          days: Math.floor(difference / (1000 * 60 * 60 * 24)),\n          hours: Math.floor((difference / (1000 * 60 * 60)) % 24),\n          minutes: Math.floor((difference / 1000 / 60) % 60),\n          seconds: Math.floor((difference / 1000) % 60),\n        });\n      }\n    };\n\n    calculateTimeLeft();\n    const timer = setInterval(calculateTimeLeft, 1000);\n\n    return () => clearInterval(timer);\n  }, [targetTimestamp]);\n\n  // Form submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!isValidEmail(email)) {\n      setStatus(\"error\");\n      setMessage(\"Please enter a valid email address\");\n      return;\n    }\n\n    setStatus(\"loading\");\n    setMessage(\"\");\n\n    try {\n      await submitToProvider(email, provider, onSubmit);\n      setStatus(\"success\");\n      setMessage(successMessage);\n      setEmail(\"\");\n    } catch (error) {\n      setStatus(\"error\");\n      setMessage(error instanceof Error ? error.message : errorMessage);\n    }\n  };\n\n  const isDisabled = status === \"loading\" || status === \"success\";\n\n  return (\n    <section className={cn(\"container mx-auto px-6 py-12 md:py-24\", className)}>\n      <div className=\"mx-auto max-w-2xl space-y-4 text-center\">\n        {/* Badge */}\n        <Badge variant=\"outline\" className=\"gap-1.5 uppercase\">\n          <div className=\"size-1.5 rounded-full bg-primary\" />\n          {badge}\n        </Badge>\n\n        {/* Heading */}\n        <h2 className=\"text-4xl font-semibold tracking-tight md:text-5xl\">\n          {heading}\n        </h2>\n\n        {/* Description */}\n        <p className=\"text-muted-foreground\">{description}</p>\n\n        {/* Email Form */}\n        <form onSubmit={handleSubmit}>\n          <div className=\"mx-auto flex max-w-md items-center gap-2 rounded-full border bg-background p-1.5 shadow-sm\">\n            <Input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder={inputPlaceholder}\n              disabled={isDisabled}\n              className=\"flex-1 rounded-full border-0 bg-transparent shadow-none focus-visible:ring-0\"\n            />\n            <Button\n              type=\"submit\"\n              disabled={isDisabled}\n              className=\"rounded-full px-6\"\n            >\n              {status === \"loading\" && (\n                <Loader2 className=\"mr-2 size-4 animate-spin\" />\n              )}\n              {buttonText}\n            </Button>\n          </div>\n        </form>\n\n        {/* Status Message */}\n        {message && (\n          <div\n            className={cn(\n              \"flex items-center justify-center gap-2 text-sm\",\n              status === \"success\" && \"text-green-600 dark:text-green-400\",\n              status === \"error\" && \"text-red-600 dark:text-red-400\",\n            )}\n          >\n            {status === \"success\" && <CheckCircle2 className=\"size-4\" />}\n            {status === \"error\" && <XCircle className=\"size-4\" />}\n            {message}\n          </div>\n        )}\n\n        {/* Social Proof */}\n        {socialProof && (\n          <div className=\"mt-6 flex items-center justify-center gap-3\">\n            <div className=\"flex -space-x-2\">\n              {socialProof.avatars.map((avatar, index) => (\n                <img\n                  key={index}\n                  src={avatar}\n                  alt={`User ${index + 1}`}\n                  className=\"size-8 rounded-full border-2 border-background object-cover\"\n                />\n              ))}\n            </div>\n            <p className=\"text-sm text-muted-foreground\">{socialProof.text}</p>\n          </div>\n        )}\n\n        {/* Countdown Timer */}\n        <div className=\"mt-6\">\n          <div className=\"flex items-center justify-center gap-4 md:gap-6\">\n            <CountdownUnit value={timeLeft.days} label=\"Days\" />\n            <CountdownSeparator />\n            <CountdownUnit value={timeLeft.hours} label=\"Hours\" />\n            <CountdownSeparator />\n            <CountdownUnit value={timeLeft.minutes} label=\"Minutes\" />\n            <CountdownSeparator />\n            <CountdownUnit value={timeLeft.seconds} label=\"Seconds\" />\n          </div>\n          {countdownLabel && (\n            <div className=\"mt-4 flex items-center justify-center gap-2 text-sm\">\n              <Calendar className=\"size-4 text-muted-foreground\" />\n              <span className=\"text-xs font-medium uppercase\">\n                {countdownLabel}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport { Waitlist01 };\nexport type { Waitlist01Props, WaitlistProvider } from \"./types\";\n",
      "type": "registry:component",
      "target": "components/waitlist-01/waitlist.tsx"
    },
    {
      "path": "src/registry/blocks/waitlist-01/providers.ts",
      "content": "import type { WaitlistProvider } from \"./types\";\n\nexport const submitToProvider = async (\n  email: string,\n  provider?: WaitlistProvider,\n  onSubmit?: (email: string) => Promise<void>,\n): Promise<void> => {\n  // If onSubmit is provided directly, use it (shorthand)\n  if (onSubmit) {\n    return onSubmit(email);\n  }\n\n  if (!provider) {\n    console.warn(\"[Waitlist] No provider configured. Email:\", email);\n    return;\n  }\n\n  switch (provider.type) {\n    case \"webhook\": {\n      const response = await fetch(provider.url, {\n        method: provider.method ?? \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...provider.headers,\n        },\n        body: JSON.stringify({ email, timestamp: new Date().toISOString() }),\n      });\n      if (!response.ok) {\n        throw new Error(`Webhook failed: ${response.status}`);\n      }\n      break;\n    }\n\n    case \"supabase\": {\n      const table = provider.table ?? \"waitlist\";\n      const response = await fetch(`${provider.url}/rest/v1/${table}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          apikey: provider.anonKey,\n          Authorization: `Bearer ${provider.anonKey}`,\n          Prefer: \"return=minimal\",\n        },\n        body: JSON.stringify({ email, created_at: new Date().toISOString() }),\n      });\n      if (!response.ok) {\n        const error = await response.text();\n        // Handle duplicate email (Supabase returns 409 or 23505 error)\n        if (response.status === 409 || error.includes(\"23505\")) {\n          throw new Error(\"This email is already on the waitlist\");\n        }\n        throw new Error(`Supabase error: ${response.status}`);\n      }\n      break;\n    }\n\n    case \"custom\": {\n      return provider.handler(email);\n    }\n  }\n};\n\nexport const isValidEmail = (email: string): boolean => {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n};\n",
      "type": "registry:component",
      "target": "components/waitlist-01/providers.ts"
    },
    {
      "path": "src/registry/blocks/waitlist-01/types.ts",
      "content": "export interface TimeLeft {\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n}\n\nexport type SubmitStatus = \"idle\" | \"loading\" | \"success\" | \"error\";\n\n// Provider configurations\nexport interface WebhookProvider {\n  type: \"webhook\";\n  url: string;\n  method?: \"POST\" | \"PUT\";\n  headers?: Record<string, string>;\n}\n\nexport interface SupabaseProvider {\n  type: \"supabase\";\n  url: string;\n  anonKey: string;\n  table?: string;\n}\n\nexport interface CustomProvider {\n  type: \"custom\";\n  handler: (email: string) => Promise<void>;\n}\n\nexport type WaitlistProvider =\n  | WebhookProvider\n  | SupabaseProvider\n  | CustomProvider;\n\nexport interface Waitlist01Props {\n  // Content\n  badge?: string;\n  heading?: string;\n  description?: string;\n  inputPlaceholder?: string;\n  buttonText?: string;\n  // Provider\n  provider?: WaitlistProvider;\n  onSubmit?: (email: string) => Promise<void>;\n  // Messages\n  successMessage?: string;\n  errorMessage?: string;\n  // Social proof\n  socialProof?: {\n    avatars: string[];\n    text: string;\n  };\n  // Countdown\n  countdown?: {\n    targetDate: Date | number;\n    label?: string;\n  };\n  className?: string;\n}\n",
      "type": "registry:component",
      "target": "components/waitlist-01/types.ts"
    }
  ],
  "meta": {
    "image": "/r/previews/waitlist-01.webp"
  },
  "categories": [
    "waitlist"
  ],
  "type": "registry:block"
}