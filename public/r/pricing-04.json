{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "pricing-04",
  "title": "Pricing 04",
  "description": "A 3-column pricing table with Stripe Checkout integration",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "card",
    "tabs",
    "badge",
    "separator"
  ],
  "files": [
    {
      "path": "src/registry/blocks/pricing-04/pricing.tsx",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { BillingToggle } from \"./components/billing-toggle\";\nimport { PlanCard } from \"./components/plan-card\";\nimport type { Pricing04Props, BillingInterval, PricingPlan, PricingFeature } from \"./types/pricing\";\n\n// ============================================================================\n// Default Plans Data\n// ============================================================================\n\nconst defaultPlans: PricingPlan[] = [\n  {\n    id: \"starter\",\n    name: \"Starter\",\n    description: \"Perfect for side projects and small teams getting started.\",\n    monthlyPrice: 0,\n    yearlyPrice: 0,\n    currency: \"USD\",\n    features: [\n      { text: \"Up to 5 projects\", included: true },\n      { text: \"Basic analytics\", included: true },\n      { text: \"Email support\", included: true },\n      { text: \"API access\", included: false },\n      { text: \"Custom integrations\", included: false },\n      { text: \"Priority support\", included: false },\n    ],\n    cta: { text: \"Get Started\", href: \"#\" },\n  },\n  {\n    id: \"pro\",\n    name: \"Pro\",\n    description: \"For growing teams that need more power and flexibility.\",\n    monthlyPrice: 29,\n    yearlyPrice: 290,\n    currency: \"USD\",\n    features: [\n      { text: \"Unlimited projects\", included: true },\n      { text: \"Advanced analytics\", included: true },\n      { text: \"Priority email support\", included: true },\n      { text: \"API access\", included: true },\n      { text: \"Custom integrations\", included: true },\n      { text: \"Priority support\", included: false },\n    ],\n    highlighted: true,\n    badge: \"Most Popular\",\n    cta: { text: \"Start Free Trial\" },\n    stripePriceId: {\n      monthly: \"price_pro_monthly\",\n      yearly: \"price_pro_yearly\",\n    },\n  },\n  {\n    id: \"enterprise\",\n    name: \"Enterprise\",\n    description: \"For large organizations with custom needs and SLA requirements.\",\n    monthlyPrice: 99,\n    yearlyPrice: 990,\n    currency: \"USD\",\n    features: [\n      { text: \"Everything in Pro\", included: true },\n      { text: \"Custom analytics\", included: true },\n      { text: \"Dedicated support\", included: true },\n      { text: \"Advanced API access\", included: true },\n      { text: \"Custom integrations\", included: true },\n      { text: \"SLA guarantee\", included: true },\n    ],\n    cta: { text: \"Contact Sales\", href: \"#\" },\n    stripePriceId: {\n      monthly: \"price_enterprise_monthly\",\n      yearly: \"price_enterprise_yearly\",\n    },\n  },\n];\n\n// ============================================================================\n// Main Component\n// ============================================================================\n\nconst Pricing04 = ({\n  heading = \"Simple, Transparent Pricing\",\n  description = \"Choose the plan that fits your needs. No hidden fees, cancel anytime.\",\n  plans = defaultPlans,\n  className,\n  onCheckout,\n}: Pricing04Props) => {\n  const [interval, setInterval] = useState<BillingInterval>(\"monthly\");\n\n  // Calculate yearly discount percentage\n  const yearlyDiscount = plans[1]\n    ? Math.round(\n        ((plans[1].monthlyPrice * 12 - plans[1].yearlyPrice) /\n          (plans[1].monthlyPrice * 12)) *\n          100\n      )\n    : 17;\n\n  return (\n    <section className={cn(\"w-full py-12 md:py-24\", className)}>\n      <div className=\"container mx-auto px-6\">\n        {/* Header */}\n        <div className=\"mx-auto mb-12 max-w-3xl text-center\">\n          <h2 className=\"text-4xl font-semibold tracking-tight md:text-5xl\">\n            {heading}\n          </h2>\n          <p className=\"mt-4 text-lg text-muted-foreground\">{description}</p>\n\n          {/* Billing Toggle */}\n          <BillingToggle\n            value={interval}\n            onChange={setInterval}\n            yearlyDiscount={yearlyDiscount}\n            className=\"mt-8\"\n          />\n        </div>\n\n        {/* Plans Grid */}\n        <div className=\"mx-auto grid max-w-5xl items-center gap-6 md:grid-cols-3\">\n          {plans.map((plan) => (\n            <PlanCard\n              key={plan.id}\n              plan={plan}\n              interval={interval}\n              onCheckout={onCheckout}\n            />\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport { Pricing04 };\nexport type { Pricing04Props, PricingPlan, PricingFeature, BillingInterval };\n",
      "type": "registry:component",
      "target": "components/pricing-04/pricing.tsx"
    },
    {
      "path": "src/registry/blocks/pricing-04/types/pricing.ts",
      "content": "// ============================================================================\n// Types for Pricing Component with Stripe Integration\n// ============================================================================\n\nexport interface PricingFeature {\n  text: string;\n  included: boolean;\n}\n\nexport interface PricingPlan {\n  id: string;\n  name: string;\n  description: string;\n  monthlyPrice: number;\n  yearlyPrice: number;\n  currency: \"EUR\" | \"USD\";\n  features: PricingFeature[];\n  highlighted?: boolean;\n  badge?: string;\n  cta: {\n    text: string;\n    href?: string;\n  };\n  // Stripe Price IDs (optional - for Stripe integration)\n  stripePriceId?: {\n    monthly: string;\n    yearly: string;\n  };\n}\n\nexport interface Pricing04Props {\n  heading?: string;\n  description?: string;\n  plans?: PricingPlan[];\n  currency?: \"EUR\" | \"USD\";\n  className?: string;\n  // Stripe checkout handler - injected by Stripe integration\n  onCheckout?: (priceId: string, mode: \"payment\" | \"subscription\") => Promise<void>;\n}\n\nexport type BillingInterval = \"monthly\" | \"yearly\";\n",
      "type": "registry:component",
      "target": "components/pricing-04/types/pricing.ts"
    },
    {
      "path": "src/registry/blocks/pricing-04/components/index.ts",
      "content": "export { BillingToggle } from \"./billing-toggle\";\nexport { FeatureList } from \"./feature-list\";\nexport { PlanCard } from \"./plan-card\";\nexport { PriceDisplay } from \"./price-display\";\n",
      "type": "registry:component",
      "target": "components/pricing-04/components/index.ts"
    },
    {
      "path": "src/registry/blocks/pricing-04/components/billing-toggle.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport type { BillingInterval } from \"../types/pricing\";\n\ninterface BillingToggleProps {\n  value: BillingInterval;\n  onChange: (value: BillingInterval) => void;\n  yearlyDiscount?: number;\n  className?: string;\n}\n\nexport function BillingToggle({\n  value,\n  onChange,\n  yearlyDiscount = 17,\n  className,\n}: BillingToggleProps) {\n  return (\n    <div className={cn(\"flex flex-col items-center gap-2\", className)}>\n      <Tabs\n        value={value}\n        onValueChange={(v) => onChange(v as BillingInterval)}\n      >\n        <TabsList className=\"h-10\">\n          <TabsTrigger\n            value=\"monthly\"\n            className=\"px-6 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground\"\n          >\n            Monthly\n          </TabsTrigger>\n          <TabsTrigger\n            value=\"yearly\"\n            className=\"px-6 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground\"\n          >\n            Yearly\n          </TabsTrigger>\n        </TabsList>\n      </Tabs>\n      {yearlyDiscount > 0 && (\n        <p className=\"text-sm text-muted-foreground\">\n          Save {yearlyDiscount}% with yearly billing\n        </p>\n      )}\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/pricing-04/components/billing-toggle.tsx"
    },
    {
      "path": "src/registry/blocks/pricing-04/components/feature-list.tsx",
      "content": "\"use client\";\n\nimport { Check, X } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport type { PricingFeature } from \"../types/pricing\";\n\ninterface FeatureListProps {\n  features: PricingFeature[];\n  highlighted?: boolean;\n  className?: string;\n}\n\nexport function FeatureList({\n  features,\n  highlighted,\n  className,\n}: FeatureListProps) {\n  return (\n    <ul className={cn(\"space-y-3\", className)}>\n      {features.map((feature) => (\n        <li key={feature.text} className=\"flex items-start gap-3\">\n          {feature.included ? (\n            <Check\n              className={cn(\n                \"mt-0.5 size-4 shrink-0\",\n                highlighted ? \"text-primary-foreground\" : \"text-primary\"\n              )}\n            />\n          ) : (\n            <X\n              className={cn(\n                \"mt-0.5 size-4 shrink-0\",\n                highlighted\n                  ? \"text-primary-foreground/40\"\n                  : \"text-muted-foreground/40\"\n              )}\n            />\n          )}\n          <span\n            className={cn(\n              \"text-sm\",\n              !feature.included &&\n                (highlighted\n                  ? \"text-primary-foreground/50\"\n                  : \"text-muted-foreground/50\")\n            )}\n          >\n            {feature.text}\n          </span>\n        </li>\n      ))}\n    </ul>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/pricing-04/components/feature-list.tsx"
    },
    {
      "path": "src/registry/blocks/pricing-04/components/plan-card.tsx",
      "content": "\"use client\";\n\nimport { useState } from \"react\";\nimport { Loader2 } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { PriceDisplay } from \"./price-display\";\nimport { FeatureList } from \"./feature-list\";\nimport type { PricingPlan, BillingInterval } from \"../types/pricing\";\n\ninterface PlanCardProps {\n  plan: PricingPlan;\n  interval: BillingInterval;\n  onCheckout?: (priceId: string, mode: \"payment\" | \"subscription\") => Promise<void>;\n  className?: string;\n}\n\nexport function PlanCard({\n  plan,\n  interval,\n  onCheckout,\n  className,\n}: PlanCardProps) {\n  const [isLoading, setIsLoading] = useState(false);\n  const isFree = plan.monthlyPrice === 0 && plan.yearlyPrice === 0;\n\n  const handleClick = async () => {\n    // If no Stripe integration or free plan, use regular href\n    if (!onCheckout || isFree || !plan.stripePriceId) {\n      if (plan.cta.href) {\n        window.location.href = plan.cta.href;\n      }\n      return;\n    }\n\n    // Stripe checkout\n    setIsLoading(true);\n    try {\n      const priceId =\n        interval === \"yearly\"\n          ? plan.stripePriceId.yearly\n          : plan.stripePriceId.monthly;\n      await onCheckout(priceId, \"subscription\");\n    } catch (error) {\n      console.error(\"Checkout error:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Card\n      className={cn(\n        \"relative flex flex-col p-6\",\n        plan.highlighted &&\n          \"z-10 scale-105 border-primary bg-primary text-primary-foreground shadow-xl md:-my-4\",\n        className\n      )}\n    >\n      {/* Badge */}\n      {plan.badge && (\n        <Badge\n          variant={plan.highlighted ? \"secondary\" : \"default\"}\n          className=\"absolute -top-3 left-1/2 -translate-x-1/2\"\n        >\n          {plan.badge}\n        </Badge>\n      )}\n\n      {/* Header */}\n      <div className=\"mb-4\">\n        <h3 className=\"text-xl font-semibold\">{plan.name}</h3>\n        <p\n          className={cn(\n            \"mt-1 text-sm\",\n            plan.highlighted\n              ? \"text-primary-foreground/80\"\n              : \"text-muted-foreground\"\n          )}\n        >\n          {plan.description}\n        </p>\n      </div>\n\n      {/* Price */}\n      <PriceDisplay\n        monthlyPrice={plan.monthlyPrice}\n        yearlyPrice={plan.yearlyPrice}\n        currency={plan.currency}\n        interval={interval}\n        highlighted={plan.highlighted}\n        className=\"mb-4\"\n      />\n\n      {/* CTA Button */}\n      <Button\n        variant={plan.highlighted ? \"secondary\" : \"outline\"}\n        className=\"w-full\"\n        onClick={handleClick}\n        disabled={isLoading}\n      >\n        {isLoading && <Loader2 className=\"mr-2 size-4 animate-spin\" />}\n        {plan.cta.text}\n      </Button>\n\n      {/* Separator */}\n      <Separator\n        className={cn(\"my-6\", plan.highlighted && \"bg-primary-foreground/20\")}\n      />\n\n      {/* Features */}\n      <div className=\"flex-1\">\n        <p\n          className={cn(\n            \"mb-4 text-sm font-medium\",\n            plan.highlighted\n              ? \"text-primary-foreground\"\n              : \"text-foreground\"\n          )}\n        >\n          What&apos;s included:\n        </p>\n        <FeatureList features={plan.features} highlighted={plan.highlighted} />\n      </div>\n    </Card>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/pricing-04/components/plan-card.tsx"
    },
    {
      "path": "src/registry/blocks/pricing-04/components/price-display.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport type { BillingInterval } from \"../types/pricing\";\n\ninterface PriceDisplayProps {\n  monthlyPrice: number;\n  yearlyPrice: number;\n  currency: \"EUR\" | \"USD\";\n  interval: BillingInterval;\n  highlighted?: boolean;\n  className?: string;\n}\n\nconst currencySymbols = {\n  EUR: \"\\u20AC\",\n  USD: \"$\",\n};\n\nexport function PriceDisplay({\n  monthlyPrice,\n  yearlyPrice,\n  currency,\n  interval,\n  highlighted,\n  className,\n}: PriceDisplayProps) {\n  const price = interval === \"yearly\" ? yearlyPrice : monthlyPrice;\n  const displayPrice = interval === \"yearly\" ? Math.round(price / 12) : price;\n  const symbol = currencySymbols[currency];\n\n  return (\n    <div className={cn(\"flex items-baseline gap-1\", className)}>\n      <span\n        className={cn(\n          \"text-4xl font-bold tracking-tight\",\n          highlighted && \"text-primary-foreground\"\n        )}\n      >\n        {symbol}\n        {displayPrice}\n      </span>\n      <span\n        className={cn(\n          \"text-sm\",\n          highlighted ? \"text-primary-foreground/80\" : \"text-muted-foreground\"\n        )}\n      >\n        /month\n      </span>\n      {interval === \"yearly\" && (\n        <span\n          className={cn(\n            \"ml-2 text-xs\",\n            highlighted ? \"text-primary-foreground/60\" : \"text-muted-foreground\"\n          )}\n        >\n          (billed {symbol}\n          {yearlyPrice}/year)\n        </span>\n      )}\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/pricing-04/components/price-display.tsx"
    },
    {
      "path": "src/registry/blocks/pricing-04/stripe/checkout-action.ts",
      "content": "\"use server\";\n\n// ============================================================================\n// Stripe Checkout Server Actions\n//\n// Prerequisites:\n// 1. Install Stripe: pnpm add stripe\n// 2. Set environment variables (see README.md)\n// 3. Create products and prices in Stripe Dashboard\n// ============================================================================\n\nimport { STRIPE_URLS } from \"./config\";\n\n// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n// Uncomment and use with real Stripe SDK:\n// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n// import Stripe from \"stripe\";\n//\n// const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\n//   apiVersion: \"2024-11-20.acacia\",\n// });\n\ninterface CreateCheckoutSessionResult {\n  url: string | null;\n  error?: string;\n}\n\n/**\n * Creates a Stripe Checkout session for subscription or one-time payment\n *\n * @example\n * // In your client component:\n * import { createCheckoutSession } from \"@/components/pricing-04/stripe/checkout-action\"\n *\n * const handleCheckout = async (priceId: string) => {\n *   const { url, error } = await createCheckoutSession(priceId, \"subscription\")\n *   if (url) {\n *     window.location.href = url\n *   }\n * }\n */\nexport async function createCheckoutSession(\n  priceId: string,\n  mode: \"payment\" | \"subscription\",\n  customerId?: string\n): Promise<CreateCheckoutSessionResult> {\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  // Real Stripe Implementation (uncomment when ready):\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  // try {\n  //   const session = await stripe.checkout.sessions.create({\n  //     mode,\n  //     payment_method_types: [\"card\"],\n  //     line_items: [\n  //       {\n  //         price: priceId,\n  //         quantity: 1,\n  //       },\n  //     ],\n  //     success_url: STRIPE_URLS.SUCCESS_URL,\n  //     cancel_url: STRIPE_URLS.CANCEL_URL,\n  //     ...(customerId && { customer: customerId }),\n  //     // For subscriptions, allow promotion codes\n  //     ...(mode === \"subscription\" && { allow_promotion_codes: true }),\n  //   });\n  //\n  //   return { url: session.url };\n  // } catch (error) {\n  //   console.error(\"Stripe checkout error:\", error);\n  //   return {\n  //     url: null,\n  //     error: error instanceof Error ? error.message : \"Failed to create checkout session\",\n  //   };\n  // }\n\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  // Demo mode (remove this and uncomment above when ready):\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  console.log(`[Demo] Creating ${mode} checkout session for price: ${priceId}`);\n  await new Promise((resolve) => setTimeout(resolve, 1000));\n\n  // In demo mode, return a fake success URL\n  return {\n    url: `${STRIPE_URLS.SUCCESS_URL.replace(\"{CHECKOUT_SESSION_ID}\", \"demo_session_123\")}`,\n  };\n}\n\n/**\n * Creates a Stripe Customer Portal session for managing subscriptions\n *\n * @example\n * // In your client component:\n * import { createPortalSession } from \"@/components/pricing-04/stripe/checkout-action\"\n *\n * const handleManageSubscription = async () => {\n *   const { url, error } = await createPortalSession(customerId)\n *   if (url) {\n *     window.location.href = url\n *   }\n * }\n */\nexport async function createPortalSession(\n  customerId: string\n): Promise<CreateCheckoutSessionResult> {\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  // Real Stripe Implementation (uncomment when ready):\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  // try {\n  //   const session = await stripe.billingPortal.sessions.create({\n  //     customer: customerId,\n  //     return_url: STRIPE_URLS.CANCEL_URL,\n  //   });\n  //\n  //   return { url: session.url };\n  // } catch (error) {\n  //   console.error(\"Stripe portal error:\", error);\n  //   return {\n  //     url: null,\n  //     error: error instanceof Error ? error.message : \"Failed to create portal session\",\n  //   };\n  // }\n\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  // Demo mode:\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  console.log(`[Demo] Creating portal session for customer: ${customerId}`);\n  await new Promise((resolve) => setTimeout(resolve, 500));\n\n  return {\n    url: \"https://billing.stripe.com/demo-portal\",\n  };\n}\n",
      "type": "registry:component",
      "target": "components/pricing-04/stripe/checkout-action.ts"
    },
    {
      "path": "src/registry/blocks/pricing-04/stripe/webhook-handler.ts",
      "content": "// ============================================================================\n// Stripe Webhook Handler\n//\n// Use this in: app/api/stripe/webhook/route.ts\n//\n// Prerequisites:\n// 1. Install Stripe: pnpm add stripe\n// 2. Set STRIPE_WEBHOOK_SECRET environment variable\n// 3. Configure webhook endpoint in Stripe Dashboard\n// ============================================================================\n\nimport type { StripeWebhookEvent } from \"./config\";\n\n// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n// Uncomment and use with real Stripe SDK:\n// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n// import Stripe from \"stripe\";\n//\n// const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\n//   apiVersion: \"2024-11-20.acacia\",\n// });\n\ninterface WebhookHandlerResult {\n  success: boolean;\n  message: string;\n}\n\n/**\n * Handles Stripe webhook events\n *\n * @example\n * // app/api/stripe/webhook/route.ts\n * import { NextRequest, NextResponse } from \"next/server\"\n * import { handleStripeWebhook, constructWebhookEvent } from \"@/components/pricing-04/stripe/webhook-handler\"\n *\n * export async function POST(request: NextRequest) {\n *   const body = await request.text()\n *   const signature = request.headers.get(\"stripe-signature\")!\n *\n *   try {\n *     const event = await constructWebhookEvent(body, signature)\n *     const result = await handleStripeWebhook(event)\n *     return NextResponse.json(result)\n *   } catch (error) {\n *     return NextResponse.json({ error: \"Webhook error\" }, { status: 400 })\n *   }\n * }\n */\n\n// Stripe event type (simplified for demo)\ninterface StripeEvent {\n  id: string;\n  type: StripeWebhookEvent;\n  data: {\n    object: Record<string, unknown>;\n  };\n}\n\nexport async function handleStripeWebhook(\n  event: StripeEvent\n): Promise<WebhookHandlerResult> {\n  const eventType = event.type;\n\n  try {\n    switch (eventType) {\n      case \"checkout.session.completed\": {\n        const session = event.data.object;\n        // Handle successful checkout\n        // - Create/update user subscription in database\n        // - Send confirmation email\n        // - Grant access to premium features\n        console.log(\"[Webhook] Checkout completed:\", session);\n        await handleCheckoutCompleted(session);\n        break;\n      }\n\n      case \"customer.subscription.created\": {\n        const subscription = event.data.object;\n        // Handle new subscription\n        console.log(\"[Webhook] Subscription created:\", subscription);\n        await handleSubscriptionCreated(subscription);\n        break;\n      }\n\n      case \"customer.subscription.updated\": {\n        const subscription = event.data.object;\n        // Handle subscription update (upgrade/downgrade)\n        console.log(\"[Webhook] Subscription updated:\", subscription);\n        await handleSubscriptionUpdated(subscription);\n        break;\n      }\n\n      case \"customer.subscription.deleted\": {\n        const subscription = event.data.object;\n        // Handle subscription cancellation\n        console.log(\"[Webhook] Subscription deleted:\", subscription);\n        await handleSubscriptionDeleted(subscription);\n        break;\n      }\n\n      case \"invoice.payment_succeeded\": {\n        const invoice = event.data.object;\n        // Handle successful payment\n        console.log(\"[Webhook] Payment succeeded:\", invoice);\n        await handlePaymentSucceeded(invoice);\n        break;\n      }\n\n      case \"invoice.payment_failed\": {\n        const invoice = event.data.object;\n        // Handle failed payment\n        // - Send payment failed email\n        // - Potentially downgrade or suspend access\n        console.log(\"[Webhook] Payment failed:\", invoice);\n        await handlePaymentFailed(invoice);\n        break;\n      }\n\n      default:\n        console.log(`[Webhook] Unhandled event type: ${eventType}`);\n    }\n\n    return { success: true, message: `Handled ${eventType}` };\n  } catch (error) {\n    console.error(`[Webhook] Error handling ${eventType}:`, error);\n    return {\n      success: false,\n      message: error instanceof Error ? error.message : \"Unknown error\",\n    };\n  }\n}\n\n/**\n * Constructs and verifies a Stripe webhook event\n */\nexport async function constructWebhookEvent(\n  body: string,\n  signature: string\n): Promise<StripeEvent> {\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  // Real Stripe Implementation (uncomment when ready):\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  // const webhookSecret = process.env.STRIPE_WEBHOOK_SECRET!;\n  // return stripe.webhooks.constructEvent(body, signature, webhookSecret) as StripeEvent;\n\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  // Demo mode:\n  // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  console.log(\"[Demo] Constructing webhook event\");\n  return JSON.parse(body) as StripeEvent;\n}\n\n// ============================================================================\n// Event Handlers - Implement your business logic here\n// ============================================================================\n\nasync function handleCheckoutCompleted(\n  session: Record<string, unknown>\n): Promise<void> {\n  // Example implementation:\n  // const customerId = session.customer as string;\n  // const subscriptionId = session.subscription as string;\n  //\n  // await db.update(users)\n  //   .set({ stripeCustomerId: customerId, subscriptionId })\n  //   .where(eq(users.email, session.customer_email as string));\n\n  console.log(\"[Handler] Processing checkout completion...\");\n}\n\nasync function handleSubscriptionCreated(\n  subscription: Record<string, unknown>\n): Promise<void> {\n  // Example implementation:\n  // const customerId = subscription.customer as string;\n  // const priceId = subscription.items.data[0].price.id;\n  //\n  // await db.update(users)\n  //   .set({ subscriptionStatus: \"active\", planId: priceId })\n  //   .where(eq(users.stripeCustomerId, customerId));\n\n  console.log(\"[Handler] Processing subscription creation...\");\n}\n\nasync function handleSubscriptionUpdated(\n  subscription: Record<string, unknown>\n): Promise<void> {\n  // Example implementation:\n  // const customerId = subscription.customer as string;\n  // const status = subscription.status as string;\n  // const priceId = subscription.items.data[0].price.id;\n  //\n  // await db.update(users)\n  //   .set({ subscriptionStatus: status, planId: priceId })\n  //   .where(eq(users.stripeCustomerId, customerId));\n\n  console.log(\"[Handler] Processing subscription update...\");\n}\n\nasync function handleSubscriptionDeleted(\n  subscription: Record<string, unknown>\n): Promise<void> {\n  // Example implementation:\n  // const customerId = subscription.customer as string;\n  //\n  // await db.update(users)\n  //   .set({ subscriptionStatus: \"canceled\", planId: null })\n  //   .where(eq(users.stripeCustomerId, customerId));\n\n  console.log(\"[Handler] Processing subscription deletion...\");\n}\n\nasync function handlePaymentSucceeded(\n  invoice: Record<string, unknown>\n): Promise<void> {\n  // Example implementation:\n  // - Update payment history\n  // - Send receipt email\n\n  console.log(\"[Handler] Processing successful payment...\");\n}\n\nasync function handlePaymentFailed(\n  invoice: Record<string, unknown>\n): Promise<void> {\n  // Example implementation:\n  // const customerId = invoice.customer as string;\n  //\n  // - Send payment failed notification\n  // - Maybe update subscription status to \"past_due\"\n\n  console.log(\"[Handler] Processing failed payment...\");\n}\n",
      "type": "registry:component",
      "target": "components/pricing-04/stripe/webhook-handler.ts"
    },
    {
      "path": "src/registry/blocks/pricing-04/stripe/config.ts",
      "content": "// ============================================================================\n// Stripe Configuration\n// ============================================================================\n\n/**\n * Stripe Price IDs Configuration\n *\n * Replace these with your actual Stripe Price IDs from the Stripe Dashboard.\n * You can find these in: Stripe Dashboard > Products > Select Product > Pricing\n *\n * @example\n * // Development\n * STARTER_MONTHLY: \"price_1234567890abcdef\"\n *\n * // Production\n * STARTER_MONTHLY: \"price_live_1234567890\"\n */\nexport const STRIPE_PRICE_IDS = {\n  STARTER: {\n    MONTHLY: process.env.STRIPE_PRICE_STARTER_MONTHLY || \"price_starter_monthly\",\n    YEARLY: process.env.STRIPE_PRICE_STARTER_YEARLY || \"price_starter_yearly\",\n  },\n  PRO: {\n    MONTHLY: process.env.STRIPE_PRICE_PRO_MONTHLY || \"price_pro_monthly\",\n    YEARLY: process.env.STRIPE_PRICE_PRO_YEARLY || \"price_pro_yearly\",\n  },\n  ENTERPRISE: {\n    MONTHLY: process.env.STRIPE_PRICE_ENTERPRISE_MONTHLY || \"price_enterprise_monthly\",\n    YEARLY: process.env.STRIPE_PRICE_ENTERPRISE_YEARLY || \"price_enterprise_yearly\",\n  },\n} as const;\n\n/**\n * Stripe Checkout Success/Cancel URLs\n */\nexport const STRIPE_URLS = {\n  SUCCESS_URL: process.env.NEXT_PUBLIC_SITE_URL\n    ? `${process.env.NEXT_PUBLIC_SITE_URL}/checkout/success?session_id={CHECKOUT_SESSION_ID}`\n    : \"http://localhost:3000/checkout/success?session_id={CHECKOUT_SESSION_ID}\",\n  CANCEL_URL: process.env.NEXT_PUBLIC_SITE_URL\n    ? `${process.env.NEXT_PUBLIC_SITE_URL}/pricing`\n    : \"http://localhost:3000/pricing\",\n} as const;\n\n/**\n * Stripe Webhook Events to handle\n */\nexport const STRIPE_WEBHOOK_EVENTS = [\n  \"checkout.session.completed\",\n  \"customer.subscription.created\",\n  \"customer.subscription.updated\",\n  \"customer.subscription.deleted\",\n  \"invoice.payment_succeeded\",\n  \"invoice.payment_failed\",\n] as const;\n\nexport type StripeWebhookEvent = (typeof STRIPE_WEBHOOK_EVENTS)[number];\n",
      "type": "registry:component",
      "target": "components/pricing-04/stripe/config.ts"
    }
  ],
  "meta": {
    "image": "/r/previews/pricing-04.webp",
    "stacks": [
      "stripe"
    ]
  },
  "categories": [
    "pricing"
  ],
  "type": "registry:block"
}