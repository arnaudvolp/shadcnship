{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "file-upload-01",
  "title": "File Upload 01",
  "description": "A drag and drop file uploader with preview, progress bars, and multiple file support",
  "dependencies": [
    "lucide-react",
    "react-dropzone"
  ],
  "registryDependencies": [
    "button",
    "card",
    "progress"
  ],
  "files": [
    {
      "path": "src/registry/blocks/file-upload-01/file-upload.tsx",
      "content": "\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dropzone, FileList } from \"./components\";\nimport { Trash2 } from \"lucide-react\";\nimport type { UploadedFile, FileUploadProps, FileUploadConfig } from \"./types/file-upload\";\n\n// =============================================================================\n// Default Configuration\n// =============================================================================\n\nconst defaultConfig: FileUploadConfig = {\n  maxFiles: 10,\n  maxSize: 10 * 1024 * 1024, // 10MB\n  acceptedTypes: [\"image/*\", \"application/pdf\", \".doc\", \".docx\", \".xls\", \".xlsx\"],\n  multiple: true,\n};\n\n// =============================================================================\n// Demo Upload Function\n// =============================================================================\n\nconst demoUpload = async (\n  file: File,\n  onProgress: (progress: number) => void\n): Promise<{ url: string }> => {\n  // Simulate upload progress\n  for (let i = 0; i <= 100; i += 10) {\n    await new Promise((resolve) => setTimeout(resolve, 100));\n    onProgress(i);\n  }\n  return { url: URL.createObjectURL(file) };\n};\n\n// =============================================================================\n// Helper Functions\n// =============================================================================\n\nfunction generateId(): string {\n  return Math.random().toString(36).substring(2, 9);\n}\n\nfunction parseAcceptedTypes(types?: string[]): Record<string, string[]> | undefined {\n  if (!types) return undefined;\n\n  const accept: Record<string, string[]> = {};\n  types.forEach((type) => {\n    if (type.startsWith(\".\")) {\n      // File extension\n      const mimeType = getMimeType(type);\n      if (mimeType) {\n        accept[mimeType] = accept[mimeType] || [];\n        accept[mimeType].push(type);\n      }\n    } else {\n      // MIME type\n      accept[type] = [];\n    }\n  });\n  return accept;\n}\n\nfunction getMimeType(extension: string): string {\n  const mimeTypes: Record<string, string> = {\n    \".doc\": \"application/msword\",\n    \".docx\": \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \".xls\": \"application/vnd.ms-excel\",\n    \".xlsx\": \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    \".pdf\": \"application/pdf\",\n    \".txt\": \"text/plain\",\n    \".csv\": \"text/csv\",\n  };\n  return mimeTypes[extension] || \"application/octet-stream\";\n}\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport default function FileUpload01({\n  config = defaultConfig,\n  files: controlledFiles,\n  onFilesChange,\n  onUpload,\n  onRemove,\n  disabled = false,\n  className,\n}: FileUploadProps) {\n  const [internalFiles, setInternalFiles] = useState<UploadedFile[]>([]);\n\n  // Use controlled or internal state\n  const files = controlledFiles ?? internalFiles;\n  const setFiles = useCallback(\n    (updater: UploadedFile[] | ((prev: UploadedFile[]) => UploadedFile[])) => {\n      const newFiles = typeof updater === \"function\" ? updater(files) : updater;\n      if (onFilesChange) {\n        onFilesChange(newFiles);\n      } else {\n        setInternalFiles(newFiles);\n      }\n    },\n    [files, onFilesChange]\n  );\n\n  const mergedConfig = { ...defaultConfig, ...config };\n  const accept = parseAcceptedTypes(mergedConfig.acceptedTypes);\n\n  const handleDrop = useCallback(\n    async (droppedFiles: File[]) => {\n      // Check max files limit\n      const remainingSlots = (mergedConfig.maxFiles || 10) - files.length;\n      const filesToAdd = droppedFiles.slice(0, remainingSlots);\n\n      // Create file entries\n      const newFiles: UploadedFile[] = filesToAdd.map((file) => ({\n        id: generateId(),\n        file,\n        name: file.name,\n        size: file.size,\n        type: file.type,\n        progress: 0,\n        status: \"idle\" as const,\n      }));\n\n      // Add to state\n      setFiles((prev) => [...prev, ...newFiles]);\n\n      // Upload each file\n      for (const uploadFile of newFiles) {\n        try {\n          // Set uploading status\n          setFiles((prev) =>\n            prev.map((f) =>\n              f.id === uploadFile.id ? { ...f, status: \"uploading\" as const } : f\n            )\n          );\n\n          // Upload with progress\n          const uploadFn = onUpload || ((file: File) => demoUpload(file, (progress) => {\n            setFiles((prev) =>\n              prev.map((f) =>\n                f.id === uploadFile.id ? { ...f, progress } : f\n              )\n            );\n          }));\n\n          const result = await uploadFn(uploadFile.file);\n\n          // Set success status\n          setFiles((prev) =>\n            prev.map((f) =>\n              f.id === uploadFile.id\n                ? { ...f, status: \"success\" as const, progress: 100, url: result.url }\n                : f\n            )\n          );\n        } catch (error) {\n          // Set error status\n          setFiles((prev) =>\n            prev.map((f) =>\n              f.id === uploadFile.id\n                ? {\n                    ...f,\n                    status: \"error\" as const,\n                    error: error instanceof Error ? error.message : \"Upload failed\",\n                  }\n                : f\n            )\n          );\n        }\n      }\n    },\n    [files.length, mergedConfig.maxFiles, setFiles, onUpload]\n  );\n\n  const handleRemove = useCallback(\n    (fileId: string) => {\n      if (onRemove) {\n        onRemove(fileId);\n      }\n      setFiles((prev) => prev.filter((f) => f.id !== fileId));\n    },\n    [setFiles, onRemove]\n  );\n\n  const handleClearAll = useCallback(() => {\n    setFiles([]);\n  }, [setFiles]);\n\n  const uploadingCount = files.filter((f) => f.status === \"uploading\").length;\n  const successCount = files.filter((f) => f.status === \"success\").length;\n  const errorCount = files.filter((f) => f.status === \"error\").length;\n\n  return (\n    <Card className={cn(\"w-full max-w-2xl\", className)}>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <CardTitle>Upload Files</CardTitle>\n            <CardDescription>\n              Drag and drop files or click to browse\n            </CardDescription>\n          </div>\n          {files.length > 0 && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleClearAll}\n              className=\"text-muted-foreground\"\n            >\n              <Trash2 className=\"size-4 mr-2\" />\n              Clear all\n            </Button>\n          )}\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Dropzone */}\n        <Dropzone\n          onDrop={handleDrop}\n          accept={accept}\n          maxSize={mergedConfig.maxSize}\n          maxFiles={mergedConfig.maxFiles}\n          multiple={mergedConfig.multiple}\n          disabled={disabled || files.length >= (mergedConfig.maxFiles || 10)}\n        />\n\n        {/* File List */}\n        <FileList files={files} onRemove={handleRemove} />\n\n        {/* Status Summary */}\n        {files.length > 0 && (\n          <div className=\"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t\">\n            <span>\n              {files.length} file{files.length !== 1 ? \"s\" : \"\"} selected\n              {mergedConfig.maxFiles && ` (max ${mergedConfig.maxFiles})`}\n            </span>\n            <div className=\"flex items-center gap-3\">\n              {uploadingCount > 0 && (\n                <span className=\"text-primary\">Uploading: {uploadingCount}</span>\n              )}\n              {successCount > 0 && (\n                <span className=\"text-green-500\">Completed: {successCount}</span>\n              )}\n              {errorCount > 0 && (\n                <span className=\"text-destructive\">Failed: {errorCount}</span>\n              )}\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\n// =============================================================================\n// Named Exports\n// =============================================================================\n\nexport { FileUpload01 };\n\n// Re-export types\nexport type {\n  UploadedFile,\n  FileUploadConfig,\n  FileUploadProps,\n  FileStatus,\n} from \"./types/file-upload\";\n",
      "type": "registry:component",
      "target": "components/file-upload-01/file-upload.tsx"
    },
    {
      "path": "src/registry/blocks/file-upload-01/types/file-upload.ts",
      "content": "// =============================================================================\n// File Upload Types\n// =============================================================================\n\nexport type FileStatus = \"idle\" | \"uploading\" | \"success\" | \"error\";\n\nexport interface UploadedFile {\n  id: string;\n  file: File;\n  name: string;\n  size: number;\n  type: string;\n  progress: number;\n  status: FileStatus;\n  error?: string;\n  url?: string;\n  preview?: string;\n}\n\nexport interface FileUploadConfig {\n  maxFiles?: number;\n  maxSize?: number; // in bytes\n  acceptedTypes?: string[];\n  multiple?: boolean;\n}\n\nexport interface FileUploadProps {\n  config?: FileUploadConfig;\n  files?: UploadedFile[];\n  onFilesChange?: (files: UploadedFile[]) => void;\n  onUpload?: (file: File) => Promise<{ url: string }>;\n  onRemove?: (fileId: string) => void;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport interface DropzoneProps {\n  onDrop: (files: File[]) => void;\n  accept?: Record<string, string[]>;\n  maxSize?: number;\n  maxFiles?: number;\n  multiple?: boolean;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport interface FilePreviewProps {\n  file: UploadedFile;\n  onRemove: (id: string) => void;\n  className?: string;\n}\n",
      "type": "registry:component",
      "target": "components/file-upload-01/types/file-upload.ts"
    },
    {
      "path": "src/registry/blocks/file-upload-01/components/index.ts",
      "content": "// Components\nexport { Dropzone } from \"./dropzone\";\nexport { FilePreview } from \"./file-preview\";\nexport { FileList } from \"./file-list\";\nexport { UploadProgress } from \"./upload-progress\";\n\n// Re-export types\nexport type {\n  FileStatus,\n  UploadedFile,\n  FileUploadConfig,\n  FileUploadProps,\n  DropzoneProps,\n  FilePreviewProps,\n} from \"../types/file-upload\";\n",
      "type": "registry:component",
      "target": "components/file-upload-01/components/index.ts"
    },
    {
      "path": "src/registry/blocks/file-upload-01/components/dropzone.tsx",
      "content": "\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { cn } from \"@/lib/utils\";\nimport { Upload, FileUp } from \"lucide-react\";\n\ninterface DropzoneProps {\n  onDrop: (files: File[]) => void;\n  accept?: Record<string, string[]>;\n  maxSize?: number;\n  maxFiles?: number;\n  multiple?: boolean;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport function Dropzone({\n  onDrop,\n  accept,\n  maxSize,\n  maxFiles,\n  multiple = true,\n  disabled = false,\n  className,\n}: DropzoneProps) {\n  const handleDrop = useCallback(\n    (acceptedFiles: File[]) => {\n      onDrop(acceptedFiles);\n    },\n    [onDrop]\n  );\n\n  const { getRootProps, getInputProps, isDragActive, isDragReject } = useDropzone({\n    onDrop: handleDrop,\n    accept,\n    maxSize,\n    maxFiles,\n    multiple,\n    disabled,\n  });\n\n  return (\n    <div\n      {...getRootProps()}\n      className={cn(\n        \"relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8 transition-colors cursor-pointer\",\n        isDragActive && !isDragReject && \"border-primary bg-primary/5\",\n        isDragReject && \"border-destructive bg-destructive/5\",\n        !isDragActive && !isDragReject && \"border-muted-foreground/25 hover:border-muted-foreground/50\",\n        disabled && \"cursor-not-allowed opacity-60\",\n        className\n      )}\n    >\n      <input {...getInputProps()} />\n\n      <div className=\"flex flex-col items-center gap-2 text-center\">\n        <div\n          className={cn(\n            \"rounded-full p-3 transition-colors\",\n            isDragActive && !isDragReject && \"bg-primary/10\",\n            isDragReject && \"bg-destructive/10\",\n            !isDragActive && \"bg-muted\"\n          )}\n        >\n          {isDragActive ? (\n            <FileUp className={cn(\"size-6\", isDragReject ? \"text-destructive\" : \"text-primary\")} />\n          ) : (\n            <Upload className=\"size-6 text-muted-foreground\" />\n          )}\n        </div>\n\n        <div className=\"space-y-1\">\n          <p className=\"text-sm font-medium\">\n            {isDragActive\n              ? isDragReject\n                ? \"File type not accepted\"\n                : \"Drop files here\"\n              : \"Drag & drop files here\"}\n          </p>\n          <p className=\"text-xs text-muted-foreground\">\n            or click to browse\n          </p>\n        </div>\n\n        {(maxSize || accept) && (\n          <div className=\"text-xs text-muted-foreground mt-2\">\n            {accept && (\n              <p>\n                Accepted: {Object.values(accept).flat().join(\", \")}\n              </p>\n            )}\n            {maxSize && (\n              <p>Max size: {formatBytes(maxSize)}</p>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction formatBytes(bytes: number): string {\n  if (bytes === 0) return \"0 Bytes\";\n  const k = 1024;\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n}\n",
      "type": "registry:component",
      "target": "components/file-upload-01/components/dropzone.tsx"
    },
    {
      "path": "src/registry/blocks/file-upload-01/components/file-preview.tsx",
      "content": "\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  X,\n  File,\n  FileText,\n  FileImage,\n  FileVideo,\n  FileAudio,\n  FileArchive,\n  FileSpreadsheet,\n  CheckCircle,\n  AlertCircle,\n  Loader2,\n} from \"lucide-react\";\nimport type { UploadedFile } from \"../types/file-upload\";\n\ninterface FilePreviewProps {\n  file: UploadedFile;\n  onRemove: (id: string) => void;\n  className?: string;\n}\n\nconst fileIcons: Record<string, typeof File> = {\n  image: FileImage,\n  video: FileVideo,\n  audio: FileAudio,\n  pdf: FileText,\n  document: FileText,\n  spreadsheet: FileSpreadsheet,\n  archive: FileArchive,\n  default: File,\n};\n\nfunction getFileIcon(type: string): typeof File {\n  if (type.startsWith(\"image/\")) return fileIcons.image;\n  if (type.startsWith(\"video/\")) return fileIcons.video;\n  if (type.startsWith(\"audio/\")) return fileIcons.audio;\n  if (type === \"application/pdf\") return fileIcons.pdf;\n  if (type.includes(\"document\") || type.includes(\"word\")) return fileIcons.document;\n  if (type.includes(\"sheet\") || type.includes(\"excel\")) return fileIcons.spreadsheet;\n  if (type.includes(\"zip\") || type.includes(\"archive\") || type.includes(\"compressed\")) return fileIcons.archive;\n  return fileIcons.default;\n}\n\nfunction formatBytes(bytes: number): string {\n  if (bytes === 0) return \"0 B\";\n  const k = 1024;\n  const sizes = [\"B\", \"KB\", \"MB\", \"GB\"];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + \" \" + sizes[i];\n}\n\nexport function FilePreview({ file, onRemove, className }: FilePreviewProps) {\n  const [preview, setPreview] = useState<string | null>(null);\n  const Icon = getFileIcon(file.type);\n  const isImage = file.type.startsWith(\"image/\");\n\n  useEffect(() => {\n    if (isImage && file.file) {\n      const url = URL.createObjectURL(file.file);\n      setPreview(url);\n      return () => URL.revokeObjectURL(url);\n    }\n  }, [file.file, isImage]);\n\n  return (\n    <div\n      className={cn(\n        \"group relative flex items-center gap-3 rounded-lg border p-3 transition-colors\",\n        file.status === \"error\" && \"border-destructive/50 bg-destructive/5\",\n        file.status === \"success\" && \"border-green-500/50 bg-green-500/5\",\n        className\n      )}\n    >\n      {/* Preview/Icon */}\n      <div className=\"relative size-12 shrink-0 rounded-md bg-muted overflow-hidden flex items-center justify-center\">\n        {isImage && preview ? (\n          <img\n            src={preview}\n            alt={file.name}\n            className=\"size-full object-cover\"\n          />\n        ) : (\n          <Icon className=\"size-6 text-muted-foreground\" />\n        )}\n      </div>\n\n      {/* File Info */}\n      <div className=\"flex-1 min-w-0 space-y-1\">\n        <div className=\"flex items-center gap-2\">\n          <p className=\"text-sm font-medium truncate\">{file.name}</p>\n          {file.status === \"success\" && (\n            <CheckCircle className=\"size-4 text-green-500 shrink-0\" />\n          )}\n          {file.status === \"error\" && (\n            <AlertCircle className=\"size-4 text-destructive shrink-0\" />\n          )}\n          {file.status === \"uploading\" && (\n            <Loader2 className=\"size-4 text-primary shrink-0 animate-spin\" />\n          )}\n        </div>\n\n        <p className=\"text-xs text-muted-foreground\">\n          {formatBytes(file.size)}\n          {file.error && (\n            <span className=\"text-destructive ml-2\">â€¢ {file.error}</span>\n          )}\n        </p>\n\n        {file.status === \"uploading\" && (\n          <Progress value={file.progress} className=\"h-1\" />\n        )}\n      </div>\n\n      {/* Remove Button */}\n      <Button\n        type=\"button\"\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"size-8 opacity-0 group-hover:opacity-100 transition-opacity shrink-0\"\n        onClick={() => onRemove(file.id)}\n      >\n        <X className=\"size-4\" />\n        <span className=\"sr-only\">Remove file</span>\n      </Button>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/file-upload-01/components/file-preview.tsx"
    },
    {
      "path": "src/registry/blocks/file-upload-01/components/file-list.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { FilePreview } from \"./file-preview\";\nimport type { UploadedFile } from \"../types/file-upload\";\n\ninterface FileListProps {\n  files: UploadedFile[];\n  onRemove: (id: string) => void;\n  className?: string;\n}\n\nexport function FileList({ files, onRemove, className }: FileListProps) {\n  if (files.length === 0) return null;\n\n  return (\n    <div className={cn(\"space-y-2\", className)}>\n      {files.map((file) => (\n        <FilePreview key={file.id} file={file} onRemove={onRemove} />\n      ))}\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/file-upload-01/components/file-list.tsx"
    },
    {
      "path": "src/registry/blocks/file-upload-01/components/upload-progress.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Progress } from \"@/components/ui/progress\";\n\ninterface UploadProgressProps {\n  progress: number;\n  className?: string;\n}\n\nexport function UploadProgress({ progress, className }: UploadProgressProps) {\n  return (\n    <div className={cn(\"space-y-1\", className)}>\n      <Progress value={progress} className=\"h-1\" />\n      <p className=\"text-xs text-muted-foreground text-right\">{progress}%</p>\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/file-upload-01/components/upload-progress.tsx"
    }
  ],
  "meta": {
    "image": "/r/previews/file-upload-01.webp"
  },
  "categories": [
    "file-upload"
  ],
  "type": "registry:block"
}